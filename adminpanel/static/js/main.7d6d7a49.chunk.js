(this["webpackJsonptrailer-admin-ui"]=this["webpackJsonptrailer-admin-ui"]||[]).push([[0],{23:function(e,t,a){},363:function(e,t,a){e.exports=a(469)},468:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),i=(a(38),a(89)),l=Object(i.a)();function c(){var e=JSON.parse(localStorage.getItem("token"));return e?{Authorization:e}:{}}var s=a(508),d=a(354),u=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return o.a.createElement(s.b,Object.assign({},a,{render:function(e){var a=localStorage.getItem("expiry"),n=localStorage.getItem("user"),r=localStorage.getItem("token"),i=n&&"undefined"!==n&&r&&"undefined"!==r;return console.log("isValidUser",i,"user",n,"token",r),i&&a&&a>(new Date).getTime()?o.a.createElement(t,e):(localStorage.removeItem("expiry"),localStorage.removeItem("user"),localStorage.removeItem("token"),o.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}}))}}))},m=a(501),p=a(7),h=a(185),f=a(182),b=a(310),g=a(492),y=a(311),v=a(87),E=a(237),O=a(312),j=a(309),C=a(6),S=(a(308),a(23),Object(j.a)((function(e){return{appBar:{background:"#000000"},root:{display:"flex"},title:{margin:"10px 30px 10px 10px"},headerLink:{margin:e.spacing(2),color:"#FFFFFF"},navButton:{paddingLeft:"10px",paddingRight:"10px"},navButtonGroupRight:{position:"absolute",right:"10px"}}}))),w=Object(C.a)({paper:{border:"1px solid #000000",backgroundColor:"#000000",borderRadius:0}})((function(e){return o.a.createElement(f.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),I=Object(C.a)((function(e){return Object(h.a)({root:{backgroundColor:e.palette.common.black,color:e.palette.common.white,"&:focus":{backgroundColor:e.palette.common.black,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}},"root",{backgroundColor:e.palette.common.black,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.common.white,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.black}}})}))(b.a);var T=function(){var e=S(),t=Object(s.e)(),a=!0,r=localStorage.getItem("expiry");(!r||r<=(new Date).getTime())&&(a=!1);var i=o.a.useState(null),l=Object(p.a)(i,2),c=l[0],d=l[1],u=function(e){console.log("event.currentTarget",e.currentTarget,e.currentTarget.attributes),d(e.currentTarget)},m=function(){d(null)};function h(e){return null!==c&&c.attributes.getNamedItem("aria-controls").value===e}return o.a.createElement("div",{className:e.root},o.a.createElement(g.a,{position:"static",className:e.appBar},o.a.createElement(y.a,{variant:"dense"},o.a.createElement(v.a,{variant:"h6",className:e.title},"Trailer 2 You"),a&&o.a.createElement("div",null,[{id:"customer-menu",name:"Customer",submenu:[{name:"Customer List",link:"/customers"}]},{id:"licensee-menu",name:"Licensee",submenu:[{name:"Licensee List",link:"/licensees"},{name:"Trailer Insurance List",link:"/licensee/insurance"},{name:"Trailer Servicing List",link:"/licensee/servicing"}]},{id:"payments-menu",name:"Payments",submenu:[{name:"Inward Payments",link:"/payments/inward"},{name:"Outward Payments",link:"/payments/outward"}]},{id:"financial-menu",name:"Financials",submenu:[{name:"Financials per Licensee",link:"/financial/licensee"},{name:"Financials per Rental Item",link:"/financial/renteditem"}]},{id:"rentals-menu",name:"Rentals",submenu:[{name:"Rentals List",link:"/rentals"}]},{id:"rental-item-menu",name:"Rental Item",submenu:[{name:"Rental Item Types",link:"/rentalitemtypes"},{name:"Trailer Types",link:"/trailertypes"},{name:"Upsell Items Types",link:"/upsellItemtypes"}]},{id:"employee-menu",name:"Admin Employee",submenu:[{name:"Invite Employee",link:"/employee/invite"},{name:"Employee List",link:"/employee/list"}]}].map((function(a){return o.a.createElement(n.Fragment,{key:a.name},o.a.createElement(E.a,{className:e.navButton,"aria-controls":a.id,"aria-haspopup":"true",variant:"contained",color:"primary",onClick:u},a.name),o.a.createElement(w,{id:a.id,anchorEl:c,keepMounted:!0,open:h(a.id),onClose:m},a.submenu.map((function(e){return o.a.createElement(I,{key:e.name,onClick:function(a){t.push("".concat(e.link)),m()}},o.a.createElement(O.a,{primary:e.name}))}))))}))),a&&o.a.createElement("div",{className:e.navButtonGroupRight},[{id:"profile-menu",name:"Profile",submenu:[{name:"Edit Profile",link:"/employee/edit"},{name:"Logout",link:"/logout"}]}].map((function(a){return o.a.createElement(n.Fragment,{key:a.name},o.a.createElement(E.a,{className:e.navButton,"aria-controls":a.id,"aria-haspopup":"true",variant:"contained",color:"primary",onClick:u},a.name),o.a.createElement(w,{id:a.id,anchorEl:c,keepMounted:!0,open:h(a.id),onClose:m},a.submenu.map((function(e){return o.a.createElement(I,{key:e.name,onClick:function(a){t.push("".concat(e.link)),m()}},o.a.createElement(O.a,{primary:e.name}))}))))}))))))},k=Object(j.a)((function(e){return{menuButton:{},footer:{position:"fixed",left:"0",bottom:"0",width:"100%"},footerText:{color:"#FFFFFF"},footerLink:{margin:e.spacing(2),color:"#FFFFFF"}}}));var N=function(){var e=k();return o.a.createElement("footer",{className:e.footer},o.a.createElement(g.a,{position:"static"},o.a.createElement(v.a,{variant:"body2",align:"center",className:e.footerText},"Copyright \xa9 ",o.a.createElement("a",{color:"inherit",href:"https://trailer2you.com/",className:e.footerText},"Trailer2You")," ",(new Date).getFullYear())))};var x=function(){return o.a.createElement("div",{className:"Home"},"Home")},L=a(15),D=a(2),A=a(26),R=a.n(A),P=a(493),F=a(504),W=a(494),q=a(503),V=a(332),_=a(495),M={country:"India",states:["New South Wales","Victoria","Tasmania","Queensland","South Australia","Western Australia"],businessType:["individual","company"],days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],hours:"1000-1900",hoursStart:"10:00",hoursEnd:"19:00",mcc:"7513",productDescription:"Trailer Rental",licenseeEmployeeType:["employee","owner","representative","director","executive"]},H=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),Y="".concat("http://localhost:5000","/admin/customers"),U="".concat("http://localhost:5000","/admin/customer/verify/driverLicense"),J="".concat("http://localhost:5000","/admin/customer/otp/resend"),z="".concat("http://localhost:5000","/admin/customer/otp/verify"),B="".concat("http://localhost:5000","/admin/customer/email/verify/resend"),Q="".concat("http://localhost:5000","/admin/customer/password/forgot");"".concat("http://localhost:5000","/admin/customer/password/reset");function G(e){return console.log("TableActionButton",e),o.a.createElement("span",null,e.title)}function Z(e){var t=H(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=(i.state||{from:{pathname:"/"}}).from;a.acl.CUSTOMERS.includes("VIEW")||r.replace(l);var d=o.a.useState([]),u=Object(p.a)(d,2),m=(u[0],u[1]),h=o.a.useState(0),f=Object(p.a)(h,2),b=(f[0],f[1]),g={customerId:"",mobile:"",country:M.country},y=Object(n.useState)(!1),v=Object(p.a)(y,2),O=v[0],j=v[1],C=Object(n.useState)(""),S=Object(p.a)(C,2),w=S[0],I=S[1],T=Object(n.useState)(""),k=Object(p.a)(T,2),N=k[0],x=k[1],A=Object(n.useState)(g),Z=Object(p.a)(A,2),$=Z[0],K=Z[1];function X(){j(!1)}var ee=o.a.createRef();return o.a.createElement("div",{className:"t2y-list t2y-customerlist ".concat(t.root)},o.a.createElement(P.a,{open:O,onClose:X,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0},o.a.createElement(F.a,{id:"form-dialog-title"},"OTP Verification"),o.a.createElement(W.a,null,o.a.createElement(q.a,null,"Please Enter OTP"),""!==N&&o.a.createElement(q.a,null,N),o.a.createElement(V.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"name",label:"OTP",type:"otp",value:w,onChange:function(e){I(e.target.value)}})),o.a.createElement(_.a,null,o.a.createElement(E.a,{onClick:X,color:"primary"},"Cancel"),o.a.createElement(E.a,{onClick:function(){var e={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({customerId:$.customerId,mobile:$.mobile,country:$.country,otp:w})};console.log("requestOptions",e),fetch(z,e).then((function(e){return e.json()})).then((function(e){console.log("".concat(z," Response"),e),ee.current&&ee.current.onQueryChange(),x("OTP Verified Successfully"),K(g),setTimeout((function(){X()}),5e3)})).catch((function(e){console.log("".concat(z," Error"),e)}))},color:"primary"},"Verify"))),o.a.createElement(R.a,{title:"Customers",tableRef:ee,columns:[{title:"ID",field:"userRef",render:function(e){return e.userRef}},{title:"Name",field:"name",render:function(e){return e.name}},{title:"Email",field:"email",render:function(e){return e.email}},{title:"Email Verified",field:"isEmailVerified",render:function(e){return e.isEmailVerified?"Yes":"No"}},{title:"Mobile",field:"mobile",render:function(e){return e.mobile}},{title:"Mobile Verified",field:"isMobileVerified",render:function(e){return e.isMobileVerified?"Yes":"No"}},{title:"Photo",field:"photo",render:function(e){return e.photo?o.a.createElement("div",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.photo},"Download")):o.a.createElement("div",null,"Not Available")}},{title:"Driver License",field:"driverLicense",render:function(e){return o.a.createElement("div",null,e.driverLicense?o.a.createElement("div",null,e.driverLicense.card?o.a.createElement("div",null,o.a.createElement("b",null,"Card")," : ",e.driverLicense.card):o.a.createElement("div",null,o.a.createElement("b",null,"Card")," : Not Available"),e.driverLicense.expiry?o.a.createElement("div",null,o.a.createElement("b",null,"Expiry")," : ",e.driverLicense.expiry):o.a.createElement("div",null,o.a.createElement("b",null,"Expiry")," : Not Available"),e.driverLicense.state?o.a.createElement("div",null,o.a.createElement("b",null,"State")," : ",e.driverLicense.state):o.a.createElement("div",null,o.a.createElement("b",null,"State")," : Not Available"),e.driverLicense.scan?o.a.createElement("div",null,o.a.createElement("b",null,"Scan")," :",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.driverLicense.scan},"Download")):o.a.createElement("div",null,o.a.createElement("b",null,"Scan")," : Not Available")):o.a.createElement("div",null,"Data Not available"))}},{title:"License Verified",field:"driverLicenseVerified",type:"boolean",render:function(e){return e.driverLicense.verified?"Yes":"No"}},{title:"License Accepted",field:"driverLicenseAccepted",render:function(e){return e.driverLicense.accepted?"Yes":"No"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Y,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Y," Response"),t);var n=t.customerList||[],o=t.totalCount?t.totalCount:0,r=[];m((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),b(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("getCustomer Error",e),o(e)}))}))},actions:[function(e){return{icon:function(){return o.a.createElement(G,{title:"Approve Driver License"})},tooltip:"Approve Driver License",disabled:!e.driverLicense.scan,onClick:function(e,t){console.log("Approve onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({customerId:t._id,isAccepted:!0})};console.log("requestOptions",a),fetch(U,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(U," Response"),e),ee.current&&ee.current.onQueryChange()})).catch((function(e){console.log("".concat(U," Error"),e)}))}}},function(e){return{icon:function(){return o.a.createElement(G,{title:"Reject Driver License"})},tooltip:"Reject Driver License",disabled:!e.driverLicense.scan,onClick:function(e,t){console.log("Reject onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({customerId:t._id,isAccepted:!1})};console.log("requestOptions",a),fetch(U,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(U," Response"),e),ee.current&&ee.current.onQueryChange()})).catch((function(e){console.log("".concat(U," Error"),e)}))}}},function(e){return{icon:function(){return o.a.createElement(G,{title:"Resend OTP"})},tooltip:"Resend OTP",onClick:function(e,t){console.log("Resend OTP onClick",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({customerId:t._id,mobile:t.mobile,country:t.address.country||M.country})};console.log("requestOptions",a),fetch(J,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(J," Response"),e),ee.current&&ee.current.onQueryChange(),K({customerId:t._id,mobile:t.mobile,country:t.address.country||M.country}),j(!0)})).catch((function(e){console.log("".concat(J," Error"),e)}))}}},function(e){return{icon:function(){return o.a.createElement(G,{title:"Verify Email"})},tooltip:"Verify Email",onClick:function(e,t){console.log("Verify Email",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({customerId:t._id,email:t.email})};console.log("requestOptions",a),fetch(B,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(B," Response"),e),ee.current&&ee.current.onQueryChange()})).catch((function(e){console.log("".concat(B," Error"),e)}))}}},function(e){return{icon:function(){return o.a.createElement(G,{title:"Send Reset Password Link"})},tooltip:"Send Reset Password Link",onClick:function(e,t){console.log("Resend OTP onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({customerId:t._id,email:t.email,platform:"web"})};console.log("requestOptions",a),fetch(Q,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Q," Response"),e),ee.current&&ee.current.onQueryChange()})).catch((function(e){console.log("".concat(Q," Error"),e)}))}}},{icon:"create",tooltip:"Edit Customer",onClick:function(e,t){console.log("Edit onClick",e,t),r.push("/customer/edit/".concat(t._id))}},{icon:"add_circle",tooltip:"Add Customer",isFreeAction:!0,onClick:function(e,t){console.log("Add onClick",e,t),r.push("/customer/add")}}],options:{actionsColumnIndex:-1}}))}var $=a(20),K=a.n($),X=a(28),ee=a(36),te=a.n(ee),ae=a(502),ne=a(235),oe=a(239),re=a(240),ie=a(245),le=a(480),ce=a(505),se=a(336),de=a(342),ue=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}})),me="".concat("http://localhost:5000","/admin/customer"),pe="".concat("http://localhost:5000","/admin/customer"),he="".concat("http://localhost:5000","/admin/customer");function fe(e){console.log("CustomerEdit",e);var t=ue(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)().customerId;console.log("customerId",l);var d=(i.state||{from:{pathname:"/"}}).from;l||a.acl.CUSTOMERS.includes("ADD")||r.replace(d),l&&!a.acl.CUSTOMERS.includes("UPDATE")&&r.replace(d);var u={name:"",address:{text:"",pincode:"",coordinates:"",country:M.country},dob:te()().subtract(18,"years").format("YYYY-MM-DD"),driverLicense:{card:"",expiry:te()().add(1,"year").format("YYYY-MM"),state:M.states[0],scanLink:""},email:"",isEmailVerified:!1,mobile:"",isMobileVerified:!1,photoLink:"",photo:null,driverLicenseScan:null},h=Object(n.useState)(0),f=Object(p.a)(h,2),g=f[0],y=(f[1],Object(n.useState)(u)),O=Object(p.a)(y,2),j=O[0],C=O[1],S=Object(n.useState)(""),w=Object(p.a)(S,2),I=w[0],T=w[1],k=Object(n.useState)(""),N=Object(p.a)(k,2),x=N[0],L=N[1];Object(n.useEffect)((function(){if(l){var e={method:"GET",headers:c()};fetch("".concat(me,"?id=").concat(l),e).then((function(e){return e.json()})).then((function(e){console.log("Customer API Call Response",e.customerObj);var t=e.customerObj;C({name:t.name,address:{text:t.address.text,pincode:t.address.pincode,coordinates:t.address.coordinates.join(",")},dob:t.dob,driverLicense:{card:t.driverLicense.card,expiry:t.driverLicense.expiry,state:t.driverLicense.state,scanLink:t.driverLicense.scan},email:t.email,isEmailVerified:t.isEmailVerified,mobile:t.mobile,isMobileVerified:t.isMobileVerified,photoLink:t.photo,photo:null,driverLicenseScan:null})})).catch((function(e){console.log("Error occurred while fetching Customer data",e)}))}}),[g]);var A=Object(n.useState)({name:"",address:{text:"",pincode:"",coordinates:""},dob:"",driverLicense:{card:"",expiry:"",state:"",scan:""},email:"",mobile:"",photo:""}),R=Object(p.a)(A,2),P=R[0];R[1];function F(){return(F=Object(X.a)(K.a.mark((function e(t){var a,n,o,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""!==P.name||""!==P.address.text||""!==P.address.pincode||""!==P.address.coordinates||""!==P.dob||""!==P.driverLicense.card||""!==P.driverLicense.expiry||""!==P.driverLicense.state||""!==P.driverLicense.scan||""!==P.email||""!==P.mobile||""!==P.photo)){e.next=4;break}return e.abrupt("return",!1);case 4:a={method:l?"PUT":"POST"},console.log("customer.driverLicense.expiry",j.driverLicense.expiry),j.dob=te()(j.dob).format("YYYY-MM-DD"),j.driverLicense.expiry=te()(j.driverLicense.expiry,"YYYY-MM").format("MM/YY"),console.log("customer.driverLicense.expiry",j.driverLicense.expiry),j.photo||j.driverLicenseScan?((n=new FormData).append("name",j.name),n.append("address",JSON.stringify(j.address)),n.append("dob",j.dob),n.append("driverLicense",JSON.stringify(j.driverLicense)),n.append("email",j.email),n.append("mobile",j.mobile),j.photo&&n.append("photo",j.photo,j.photo.name),j.driverLicenseScan&&n.append("driverLicenseScan",j.driverLicenseScan,j.driverLicenseScan.name),l&&(n.append("_id",l),n.append("customerId",l)),a.headers=Object(D.a)({},c()),a.body=n):(o={name:j.name,address:j.address,dob:j.dob,driverLicense:j.driverLicense,email:j.email,mobile:j.mobile},l&&(o._id=l,o.customerId=l),a.headers=Object(D.a)({},c(),{"Content-Type":"application/json"}),a.body=JSON.stringify(o)),console.log("requestOptions",a),r=l?he:pe,fetch(r,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(r," Response"),e);var t=e.customerObj;C({name:t.name,address:{text:t.address.text,pincode:t.address.pincode,coordinates:t.address.coordinates.join(",")},dob:t.dob,driverLicense:{card:t.driverLicense.card,expiry:t.driverLicense.expiry,state:t.driverLicense.state,scanLink:t.driverLicense.scan},email:t.email,isEmailVerified:t.isEmailVerified,mobile:t.mobile,isMobileVerified:t.isMobileVerified,photoLink:t.photo,photo:null,driverLicenseScan:null}),L(""),T("Successfully saved Customer data"),setTimeout((function(){T("")}),5e3)})).catch((function(e){console.log("".concat(r," Error"),e),L("Error occurred while saving Customer data")}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},l?"Edit Customer":"Add Customer"),""!==I&&o.a.createElement(v.a,{component:"h6",variant:"h5"},I),""!==x&&o.a.createElement(v.a,{component:"h6",variant:"h5"},x),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:""!==P.name,helperText:P.name,value:j.name,onChange:function(e){C(Object(D.a)({},j,{name:e.target.value}))}}),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Address"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"address_text",label:"Address Line",name:"address_text",autoComplete:"address_text",autoFocus:!0,error:""!==P.address.text,helperText:P.address.text,value:j.address.text,onChange:function(e){C(Object(D.a)({},j,{address:Object(D.a)({},j.address,{text:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"address_pincode",label:"Pincode",name:"address_pincode",autoComplete:"address_pincode",autoFocus:!0,error:""!==P.address.pincode,helperText:P.address.pincode,value:j.address.pincode,onChange:function(e){C(Object(D.a)({},j,{address:Object(D.a)({},j.address,{pincode:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"address_coordinates",label:"Coordinates (Latitude,Longitude format)",name:"address_coordinates",autoComplete:"address_coordinates",autoFocus:!0,error:""!==P.address.coordinates,helperText:P.address.coordinates,value:j.address.coordinates,onChange:function(e){C(Object(D.a)({},j,{address:Object(D.a)({},j.address,{coordinates:e.target.value})}))}})),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"dob",required:!0,fullWidth:!0,type:"date",id:"dob",label:"dob",name:"dob",autoComplete:"dob",autoFocus:!0,error:""!==P.dob,helperText:P.dob,value:j.dob,onChange:function(e){C(Object(D.a)({},j,{dob:e.target.value}))}}),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Driver License"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"driverLicense_card",label:"Driver License Number",name:"driverLicense_card",autoComplete:"driverLicense_card",autoFocus:!0,error:""!==P.driverLicense.card,helperText:P.driverLicense.card,value:j.driverLicense.card,onChange:function(e){C(Object(D.a)({},j,{driverLicense:Object(D.a)({},j.driverLicense,{card:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"month",id:"driverLicense_expiry",label:"Expiry Date",name:"driverLicense_expiry",autoComplete:"driverLicense_expiry",autoFocus:!0,error:""!==P.driverLicense.expiry,helperText:P.driverLicense.expiry,value:j.driverLicense.expiry,onChange:function(e){C(Object(D.a)({},j,{driverLicense:Object(D.a)({},j.driverLicense,{expiry:e.target.value})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"state-label"},"State"),o.a.createElement(ie.a,{labelId:"state-label",id:"stateSelect",value:j.driverLicense.state,onChange:function(e){C(Object(D.a)({},j,{driverLicense:Object(D.a)({},j.driverLicense,{state:e.target.value})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"state-".concat(t),value:e},e)}))),o.a.createElement(le.a,null,"Required")),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Scan ( Scan of Front and Back side of Driver License in a single File )"),j.driverLicense.scanLink&&!j.driverLicenseScan&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:j.driverLicense.scanLink},"Scan")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"raised-button-file",multiple:!0,type:"file",name:"scan",onChange:function(e){console.log("scan",e.target.files),C(Object(D.a)({},j,{driverLicenseScan:e.target.files[0]}))}}))),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,error:""!==P.email,helperText:P.email,value:j.email,onChange:function(e){C(Object(D.a)({},j,{email:e.target.value}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:j.isEmailVerified,name:"isEmailVerified",onChange:function(e){console.log("onChange isEmailVerified",e),C(Object(D.a)({},j,{isEmailVerified:!j.isEmailVerified}))}}),label:"Is Email Verified?"})),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"mobile",label:"Mobile",name:"mobile",autoComplete:"mobile",autoFocus:!0,error:""!==P.mobile,helperText:P.mobile,value:j.mobile,onChange:function(e){C(Object(D.a)({},j,{mobile:e.target.value}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:j.isMobileVerified,name:"isMobileVerified",onChange:function(e){console.log("onChange isMobileVerified",e),C(Object(D.a)({},j,{isMobileVerified:!j.isMobileVerified}))}}),label:"Is Mobile Verified?"})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Photo"),j.photoLink&&!j.photo&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:j.photoLink},"Photo")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"raised-button-file",multiple:!0,type:"file",name:"photo",onChange:function(e){console.log("photo",e.target.files),C(Object(D.a)({},j,{photo:e.target.files[0]}))}})),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return F.apply(this,arguments)}},l?"Update":"Save"))))}var be=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),ge=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),ye="".concat("http://localhost:5000","/admin/customer/password/reset");function ve(e){console.log("CustomerResetPassword",e);var t=be(),a=new URLSearchParams(Object(s.f)().search).get("token");console.log("Params",a);var r=Object(n.useState)(""),i=Object(p.a)(r,2),l=i[0],d=i[1],u=Object(n.useState)(""),h=Object(p.a)(u,2),f=h[0],b=h[1],g=Object(n.useState)(!1),y=Object(p.a)(g,2),O=(y[0],y[1],Object(n.useState)("")),j=Object(p.a)(O,2),C=j[0],S=j[1],w=Object(n.useState)(""),I=Object(p.a)(w,2),T=I[0],k=I[1],N=Object(n.useState)({password:!1,repassword:!1}),x=Object(p.a)(N,2),L=x[0],A=x[1],R=Object(n.useState)({password:"",repassword:""}),P=Object(p.a)(R,2),F=P[0],W=P[1];function q(e,t){var a="Password should be 8 or more characters long. Password should contain one Uppercase Alphabetical Character, one Lowercase Alphabetical Character, one Numeric Character and one Special Character.",n=e===t,o=ge.test(e),r=ge.test(t);console.log("doPasswordsMatch",n,"isPasswordsValid",o,"isRePasswordValid",r);var i="";n||(i+="".concat("Passwords don't match"," ")),o||(i+="".concat(a," "));var l=Object(D.a)({},L),c=Object(D.a)({},F);n&&o?(l=Object(D.a)({},l,{password:!1}),A(l),c=Object(D.a)({},c,{password:""}),W(c)):(l=Object(D.a)({},l,{password:!0}),A(l),c=Object(D.a)({},c,{password:i}),W(c));var s="";n||(s+="".concat("Passwords don't match"," ")),r||(s+="".concat(a," ")),n&&o?(l=Object(D.a)({},l,{repassword:!1}),A(l),c=Object(D.a)({},c,{repassword:""}),W(c)):(l=Object(D.a)({},l,{repassword:!0}),A(l),c=Object(D.a)({},c,{repassword:s}),W(c))}function _(){return(_=Object(X.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!L.password){e.next=4;break}return e.abrupt("return",!1);case 4:n={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({token:a,password:l})},console.log("requestOptions",n),fetch(ye,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(ye," Response"),e),k(""),S("Successfully saved Password"),d(""),b(""),setTimeout((function(){S("")}),5e3)})).catch((function(e){console.log("".concat(ye," Error"),e),k("Error occurred while saving Password")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Reset Password"),""!==C&&o.a.createElement(v.a,{component:"h6",variant:"h5"},C),""!==T&&o.a.createElement(v.a,{component:"h6",variant:"h5"},T),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l,error:L.password,helperText:F.password,onChange:function(e){d(e.target.value),q(e.target.value,f)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repassword",label:"Confirm Password",type:"password",id:"repassword",autoComplete:"confirm-password",error:L.repassword,helperText:F.repassword,value:f,onChange:function(e){b(e.target.value),q(l,e.target.value)}}),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return _.apply(this,arguments)}},"Save Password"))))}var Ee="".concat("http://localhost:5000","/admin/employee/signin"),Oe=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function je(){var e=Oe(),t=Object(s.e)();console.log("history",t);var a=Object(n.useState)(""),r=Object(p.a)(a,2),i=r[0],l=r[1],c=Object(n.useState)(""),d=Object(p.a)(c,2),u=d[0],h=d[1],f=Object(n.useState)(!1),b=Object(p.a)(f,2),g=(b[0],b[1],Object(n.useState)("")),y=Object(p.a)(g,2),O=y[0],j=y[1],C=Object(n.useState)(""),S=Object(p.a)(C,2),w=S[0],I=S[1];return o.a.createElement(m.a,{component:"main",maxWidth:"xs"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:e.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Sign In"),""!==O&&o.a.createElement(v.a,{component:"h6",variant:"h5"},O),""!==w&&o.a.createElement(v.a,{component:"h6",variant:"h5"},w),o.a.createElement("form",{className:e.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i,onChange:function(e){l(e.target.value)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:function(e){h(e.target.value)}}),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault();var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:u})};fetch(Ee,a).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("user",JSON.stringify(e.employeeObj)),localStorage.setItem("token",JSON.stringify(e.token)),localStorage.setItem("expiry",(new Date).getTime()+288e5),localStorage.setItem("aclSettingsAdmin",JSON.stringify(e.aclSettingsAdmin)),localStorage.setItem("aclSettingsLicensee",JSON.stringify(e.aclSettingsLicensee)),I(""),j("Successfully Signed in"),t.push("/")})).catch((function(e){console.log("SignIn Error",e),I("Invalid Credentials"),j("")}))}},"Sign In"))))}var Ce="".concat("http://localhost:5000","/admin/employee/invite"),Se=Object(j.a)((function(e){return{root:{width:"100%"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function we(e){var t=Se(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=localStorage.setItem("aclSettingsAdmin");r=JSON.parse(r);var i=Object(s.f)();console.log("location",i);var l=Object(s.e)();console.log("history",l);var d=(i.state||{from:{pathname:"/"}}).from;a.acl.ADMINEMPLOYEE.includes("ADD")||l.replace(d);localStorage.getItem("token");var u=Object(n.useState)(""),h=Object(p.a)(u,2),f=h[0],b=h[1],g=Object(n.useState)({}),y=Object(p.a)(g,2),O=y[0],j=y[1],C=Object(n.useState)({}),S=Object(p.a)(C,2),w=S[0],I=S[1],T=Object(n.useState)(!1),k=Object(p.a)(T,2),N=(k[0],k[1],Object(n.useState)("")),x=Object(p.a)(N,2),A=x[0],R=x[1],P=Object(n.useState)(""),F=Object(p.a)(P,2),W=F[0],q=F[1];return console.log("aclSettingsAdmin",r),Object(n.useEffect)((function(){j(Object(D.a)({},r));var e=Object.keys(r),t={};e.forEach((function(e){t[e]=[]})),I(Object(D.a)({},t))}),[]),o.a.createElement(m.a,{component:"main",maxWidth:"xs"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Invite Employee"),""!==A&&o.a.createElement(v.a,{component:"h6",variant:"h5"},A),""!==W&&o.a.createElement(v.a,{component:"h6",variant:"h5"},W),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:f,onChange:function(e){b(e.target.value)}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Employee Privileges"),O&&Object.keys(O).map((function(e){return console.log("aclType",e,w),o.a.createElement(n.Fragment,{key:e},o.a.createElement(v.a,{variant:"subtitle2"},e.toUpperCase()),o.a.createElement(n.Fragment,null,w&&w[e]&&O[e]&&O[e].map((function(t,a){return console.log(e,"setting",t),o.a.createElement(se.a,{key:a,control:o.a.createElement(de.a,{checked:w[e].includes(t),name:t,onChange:function(a){console.log("onChange",a),function(e,t,a){console.log("handleACLChange",t,a),console.log("acList",w[e].length);var n=w[e].includes(t),o=[];if(console.log("isACPPresent",n),a&&!n&&((o=Object(D.a)({},w))[e]=[].concat(Object(L.a)(o[e]),[t]),I(o)),!a&&n){var r=w[e].filter((function(e){return e!==t}));(o=Object(D.a)({},w))[e]=r,I(o)}console.log("newAcl",o[e].length)}(e,t,a.target.checked)}}),label:t})}))))}))),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){e.preventDefault();var t={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({email:f,acl:w})};fetch(Ce,t).then((function(e){return e.json()})).then((function(e){console.log(e),q(""),R("Successfully invited Employee"),l.push("/")})).catch((function(e){console.log("Employee Invite Error",e),q("Error occured while inviting Employee"),R("")}))}},"Invite Employee"))))}var Ie="".concat("http://localhost:5000","/admin/employee/invite/accept"),Te=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),ke=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");function Ne(e){console.log("EmployeeInviteAccept",e);var t=Te(),a=new URLSearchParams(Object(s.f)().search).get("token");console.log("Params",a);var r=Object(s.e)();console.log("history",r);var i=Object(n.useState)(""),l=Object(p.a)(i,2),d=l[0],u=l[1],h=Object(n.useState)(""),f=Object(p.a)(h,2),b=f[0],g=f[1],y=Object(n.useState)(""),O=Object(p.a)(y,2),j=O[0],C=O[1],S=Object(n.useState)(""),w=Object(p.a)(S,2),I=w[0],T=w[1],k=Object(n.useState)(!1),N=Object(p.a)(k,2),x=(N[0],N[1],Object(n.useState)("")),L=Object(p.a)(x,2),A=L[0],R=L[1],P=Object(n.useState)(""),F=Object(p.a)(P,2),W=F[0],q=F[1],_=Object(n.useState)({mobile:!1,name:!1,password:!1,repassword:!1}),M=Object(p.a)(_,2),H=M[0],Y=M[1],U=Object(n.useState)({mobile:"",name:"",password:"",repassword:""}),J=Object(p.a)(U,2),z=J[0],B=J[1];function Q(e,t){var a="Password should be 8 or more characters long. Password should contain one Uppercase Alphabetical Character, one Lowercase Alphabetical Character, one Numeric Character and one Special Character.",n=e===t,o=ke.test(e),r=ke.test(t);console.log("doPasswordsMatch",n,"isPasswordsValid",o,"isRePasswordValid",r);var i="";n||(i+="".concat("Passwords don't match"," ")),o||(i+="".concat(a," "));var l=Object(D.a)({},H),c=Object(D.a)({},z);n&&o?(l=Object(D.a)({},l,{password:!1}),Y(l),c=Object(D.a)({},c,{password:""}),B(c)):(l=Object(D.a)({},l,{password:!0}),Y(l),c=Object(D.a)({},c,{password:i}),B(c));var s="";n||(s+="".concat("Passwords don't match"," ")),r||(s+="".concat(a," ")),n&&o?(l=Object(D.a)({},l,{repassword:!1}),Y(l),c=Object(D.a)({},c,{repassword:""}),B(c)):(l=Object(D.a)({},l,{repassword:!0}),Y(l),c=Object(D.a)({},c,{repassword:s}),B(c))}function G(){return(G=Object(X.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(H.mobile||H.name||H.password)){e.next=4;break}return e.abrupt("return",!1);case 4:n={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({token:a,mobile:d,password:b,name:I})},console.log("requestOptions",n),fetch(Ie,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(Ie," Response"),e),q(""),R("Successfully saved Employee data"),u(""),T(""),g(""),C(""),setTimeout((function(){R(""),r.push("/")}),5e3)})).catch((function(e){console.log("".concat(Ie," Error"),e),q("Error occurred while saving Employee data")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Accept Employee Invite"),""!==A&&o.a.createElement(v.a,{component:"h6",variant:"h5"},A),""!==W&&o.a.createElement(v.a,{component:"h6",variant:"h5"},W),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"mobile",label:"Mobile",name:"mobile",autoComplete:"mobile",autoFocus:!0,error:H.mobile,helperText:z.mobile,value:d,onChange:function(e){u(e.target.value)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:H.name,helperText:z.name,value:I,onChange:function(e){T(e.target.value)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:b,error:H.password,helperText:z.password,onChange:function(e){g(e.target.value),Q(e.target.value,j)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repassword",label:"Confirm Password",type:"password",id:"repassword",autoComplete:"confirm-password",error:H.repassword,helperText:z.repassword,value:j,onChange:function(e){C(e.target.value),Q(b,e.target.value)}}),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return G.apply(this,arguments)}},"Accept"))))}"".concat("http://localhost:5000","/admin/employee/acl");var xe="".concat("http://localhost:5000","/admin/employee/profile"),Le="".concat("http://localhost:5000","/admin/employee/profile"),De="".concat("http://localhost:5000","/admin/employee/profile/admin"),Ae=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");function Re(e){console.log("EmployeeEdit",e);var t=Ae(),a=localStorage.getItem("token"),r=localStorage.getItem("user");r=JSON.parse(r);var i=localStorage.setItem("aclSettingsAdmin");i=JSON.parse(i),console.log("userData",r),console.log("token",a);var l=Object(s.g)().employeeId;l||(l=r._id),console.log("employeeId",l);var d=Object(s.e)();console.log("history",d);var u=Object(s.f)();console.log("location",u);var h=(u.state||{from:{pathname:"/"}}).from;l&&!r.acl.ADMINEMPLOYEE.includes("UPDATE")&&d.replace(h);var f=Object(n.useState)({}),b=Object(p.a)(f,2),g=b[0],y=b[1],O=Le,j=Object(n.useState)(0),C=Object(p.a)(j,2),S=(C[0],C[1],Object(n.useState)({mobile:"",name:"",password:"",repassword:"",acl:{}})),w=Object(p.a)(S,2),I=w[0],T=w[1],k=Object(n.useState)(""),N=Object(p.a)(k,2),x=N[0],A=N[1],R=Object(n.useState)(""),P=Object(p.a)(R,2),F=P[0],W=P[1];Object(n.useEffect)((function(){r.isOwner&&(console.log("aclSettingsAdmin",i),y(Object(D.a)({},i)));var e={method:"GET",headers:c()};fetch("".concat(xe,"?employeeId=").concat(l),e).then((function(e){return e.json()})).then((function(e){console.log("API Response",e);var t=e.employeeObj,a=t.password;console.log("aclSettings",g),console.log("employeeObj.acl",t.acl),T(Object(D.a)({},I,{mobile:t.mobile,name:t.name,password:a,repassword:a,acl:t.acl}))})).catch((function(e){console.log("Error occurred while fetching ACL",e)}))}),[]);var q=Object(n.useState)({mobile:!1,name:!1,password:!1,repassword:!1}),_=Object(p.a)(q,2),M=_[0],H=(_[1],Object(n.useState)({mobile:"",name:"",password:"",repassword:""})),Y=Object(p.a)(H,2),U=Y[0];Y[1];function J(){return(J=Object(X.a)(K.a.mark((function e(t){var a,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(M.mobile||M.name||M.password)){e.next=4;break}return e.abrupt("return",!1);case 4:r.isOwner&&(O=De),a=I.acl,n={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({employeeId:l,mobile:I.mobile,name:I.name,acl:a})},console.log("requestOptions",n),fetch(O,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(O," Response"),e),localStorage.setItem("user",JSON.stringify(e.employeeObj)),W(""),A("Successfully saved Employee data"),setTimeout((function(){A("")}),5e3)})).catch((function(e){console.log("".concat(O," Error"),e),W("Error occurred while saving Employee data")}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Edit Employee"),""!==x&&o.a.createElement(v.a,{component:"h6",variant:"h5"},x),""!==F&&o.a.createElement(v.a,{component:"h6",variant:"h5"},F),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"mobile",label:"Mobile",name:"mobile",autoComplete:"mobile",autoFocus:!0,error:M.mobile,helperText:U.mobile,value:I.mobile,onChange:function(e){T(Object(D.a)({},I,{mobile:e.target.value})),e.target.value}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:M.name,helperText:U.name,value:I.name,onChange:function(e){T(Object(D.a)({},I,{name:e.target.value})),e.target.value}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Employee Privileges"),g&&Object.keys(g).map((function(e){return console.log("aclType",e,I.acl),o.a.createElement(n.Fragment,{key:e},o.a.createElement(v.a,{variant:"subtitle2"},e.toUpperCase()),o.a.createElement(n.Fragment,null,I.acl&&I.acl[e]&&g[e]&&g[e].map((function(t,a){return console.log(e,"setting",t),o.a.createElement(se.a,{key:a,control:o.a.createElement(de.a,{checked:I.acl[e].includes(t),name:t,onChange:function(a){console.log("onChange",a),function(e,t,a){console.log("handleACLChange",t,a),console.log("acList",I.acl[e].length);var n=I.acl[e].includes(t),o=[];if(console.log("isACPPresent",n),a&&!n&&((o=Object(D.a)({},I.acl))[e]=[].concat(Object(L.a)(o[e]),[t]),T(Object(D.a)({},I,{acl:o}))),!a&&n){var r=I.acl[e].filter((function(e){return e!==t}));(o=Object(D.a)({},I.acl))[e]=r,T(Object(D.a)({},I,{acl:o}))}console.log("newAcl",o[e].length)}(e,t,a.target.checked)}}),label:t})}))))}))),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return J.apply(this,arguments)}},"Update"))))}var Pe="".concat("http://localhost:5000","/admin/employees"),Fe="".concat("http://localhost:5000","/admin/employee/generateotp"),We="".concat("http://localhost:5000","/admin/employee/verifyotp"),qe="".concat("http://localhost:5000","/admin/employee/resendinvite"),Ve="".concat("http://localhost:5000","/admin/employee/forgotpassword"),_e=("".concat("http://localhost:5000","/admin/employee/resetpassword"),Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})));function Me(e){return console.log("TableActionButton",e),o.a.createElement("span",null,e.title)}var He=function(e){console.log("EmployeeList called");var t=_e(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=(i.state||{from:{pathname:"/"}}).from;a.acl.TRAILER.includes("VIEW")||r.replace(l);var d=Object(n.useState)([]),u=Object(p.a)(d,2),m=(u[0],u[1]),h=Object(n.useState)(0),f=Object(p.a)(h,2),b=(f[0],f[1]),g=Object(n.useState)(!1),y=Object(p.a)(g,2),v=y[0],O=y[1],j=Object(n.useState)(""),C=Object(p.a)(j,2),S=C[0],w=C[1],I=Object(n.useState)(""),T=Object(p.a)(I,2),k=T[0],N=T[1],x=Object(n.useState)(""),A=Object(p.a)(x,2),H=A[0],Y=A[1];function U(){O(!1)}var J=o.a.createRef();return o.a.createElement("div",{className:"t2y-list t2y-employeelist ".concat(t.root)},o.a.createElement(P.a,{open:v,onClose:U,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0},o.a.createElement(F.a,{id:"form-dialog-title"},"OTP Verification"),o.a.createElement(W.a,null,o.a.createElement(q.a,null,"Please Enter OTP"),""!==k&&o.a.createElement(q.a,null,k),o.a.createElement(V.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"name",label:"OTP",type:"otp",value:S,onChange:function(e){w(e.target.value)}})),o.a.createElement(_.a,null,o.a.createElement(E.a,{onClick:U,color:"primary"},"Cancel"),o.a.createElement(E.a,{onClick:function(){var e={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({mobile:H,country:M.country,otp:S})};console.log("requestOptions",e),fetch(We,e).then((function(e){return e.json()})).then((function(e){console.log("".concat(We," Response"),e),J.current&&J.current.onQueryChange(),N("OTP Verified Successfully"),Y(""),setTimeout((function(){U()}),5e3)})).catch((function(e){console.log("".concat(We," Error"),e)}))},color:"primary"},"Verify"))),o.a.createElement(R.a,{title:"Employees",tableRef:J,columns:[{title:"ID",field:"adminEmployeeRef",render:function(e){return e.adminEmployeeRef}},{title:"Name",field:"name",render:function(e){return e.name&&e.name?"".concat(e.name):e.name}},{title:"Email",field:"email",render:function(e){return e.email}},{title:"Email Verified",field:"isEmailVerified",render:function(e){return e.isEmailVerified?"Yes":"No"}},{title:"Mobile",field:"mobile",render:function(e){return e.mobile}},{title:"Mobile Verified",field:"isMobileVerified",render:function(e){return e.isMobileVerified?"Yes":"No"}},{title:"Is Owner",field:"isOwner",render:function(e){return e.isOwner?"Yes":"No"}}],data:function(e){console.log("Employee MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Pe,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Pe," Response"),t);var n=t.employeeList||[],o=t.totalCount?t.totalCount:0,r=[];m((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),b(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("getEmployees Error",e),o(e)}))}))},actions:[{icon:"create",tooltip:"Edit Employee",onClick:function(e,t){console.log("Edit onClick",e,t),r.push("/employee/edit/".concat(t._id))}},{icon:function(){return o.a.createElement(Me,{title:"Resend OTP"})},tooltip:"Resend OTP",onClick:function(e,t){console.log("Resend OTP onClick",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({mobile:t.mobile,country:M.country})};console.log("requestOptions",a),fetch(Fe,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Fe," Response"),e),J.current&&J.current.onQueryChange(),Y(t.mobile),O(!0)})).catch((function(e){console.log("".concat(Fe," Error"),e)}))}},{icon:function(){return o.a.createElement(Me,{title:"Verify Email"})},tooltip:"Verify Email",onClick:function(e,t){console.log("Verify Email",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({email:t.email})};console.log("requestOptions",a),fetch(qe,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(qe," Response"),e),J.current&&J.current.onQueryChange()})).catch((function(e){console.log("".concat(qe," Error"),e)}))}},{icon:function(){return o.a.createElement(Me,{title:"Forgot Password"})},tooltip:"Forgot Password",onClick:function(e,t){console.log("Forgot Password",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({email:t.email})};console.log("requestOptions",a),fetch(Ve,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Ve," Response"),e),J.current&&J.current.onQueryChange()})).catch((function(e){console.log("".concat(Ve," Error"),e)}))}},{icon:function(){return o.a.createElement(Me,{title:"Resend Invite"})},tooltip:"Resend Invite",onClick:function(e,t){if(t.acceptedInvite)console.log("Resend Invite",t.acceptedInvite);else{console.log("Resend Invite",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({email:t.email})};console.log("requestOptions",a),fetch(qe,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(qe," Response"),e),J.current&&J.current.onQueryChange()})).catch((function(e){console.log("".concat(qe," Error"),e)}))}}}],options:{actionsColumnIndex:-1}}))},Ye=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),Ue=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),Je="".concat("http://localhost:5000","/admin/employee/resetpassword");function ze(e){console.log("EmployeeInviteAccept",e);var t=Ye(),a=new URLSearchParams(Object(s.f)().search).get("token");console.log("Params",a);var r=Object(n.useState)(""),i=Object(p.a)(r,2),l=i[0],d=i[1],u=Object(n.useState)(""),h=Object(p.a)(u,2),f=h[0],b=h[1],g=Object(n.useState)(!1),y=Object(p.a)(g,2),O=(y[0],y[1],Object(n.useState)("")),j=Object(p.a)(O,2),C=j[0],S=j[1],w=Object(n.useState)(""),I=Object(p.a)(w,2),T=I[0],k=I[1],N=Object(n.useState)({password:!1,repassword:!1}),x=Object(p.a)(N,2),L=x[0],A=x[1],R=Object(n.useState)({password:"",repassword:""}),P=Object(p.a)(R,2),F=P[0],W=P[1];function q(e,t){var a="Password should be 8 or more characters long. Password should contain one Uppercase Alphabetical Character, one Lowercase Alphabetical Character, one Numeric Character and one Special Character.",n=e===t,o=Ue.test(e),r=Ue.test(t);console.log("doPasswordsMatch",n,"isPasswordsValid",o,"isRePasswordValid",r);var i="";n||(i+="".concat("Passwords don't match"," ")),o||(i+="".concat(a," "));var l=Object(D.a)({},L),c=Object(D.a)({},F);n&&o?(l=Object(D.a)({},l,{password:!1}),A(l),c=Object(D.a)({},c,{password:""}),W(c)):(l=Object(D.a)({},l,{password:!0}),A(l),c=Object(D.a)({},c,{password:i}),W(c));var s="";n||(s+="".concat("Passwords don't match"," ")),r||(s+="".concat(a," ")),n&&o?(l=Object(D.a)({},l,{repassword:!1}),A(l),c=Object(D.a)({},c,{repassword:""}),W(c)):(l=Object(D.a)({},l,{repassword:!0}),A(l),c=Object(D.a)({},c,{repassword:s}),W(c))}function _(){return(_=Object(X.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!L.password){e.next=4;break}return e.abrupt("return",!1);case 4:n={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({token:a,password:l})},console.log("requestOptions",n),fetch(Je,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(Je," Response"),e),k(""),S("Successfully saved Password"),d(""),b(""),setTimeout((function(){S("")}),5e3)})).catch((function(e){console.log("".concat(Je," Error"),e),k("Error occurred while saving Password")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Reset Password"),""!==C&&o.a.createElement(v.a,{component:"h6",variant:"h5"},C),""!==T&&o.a.createElement(v.a,{component:"h6",variant:"h5"},T),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l,error:L.password,helperText:F.password,onChange:function(e){d(e.target.value),q(e.target.value,f)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repassword",label:"Confirm Password",type:"password",id:"repassword",autoComplete:"confirm-password",error:L.repassword,helperText:F.repassword,value:f,onChange:function(e){b(e.target.value),q(l,e.target.value)}}),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return _.apply(this,arguments)}},"Save Password"))))}var Be="".concat("http://localhost:5000","/admin/financial/licensee"),Qe=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Ge=function(e){var t=Qe(),a=o.a.useState([]),n=Object(p.a)(a,2),r=(n[0],n[1]),i=o.a.useState(0),l=Object(p.a)(i,2),s=(l[0],l[1]),d=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Financials per Licensee",tableRef:d,columns:[{title:"Licensee Name",field:"licenseeName",render:function(e){return e.licenseeName}},{title:"Total Paid",field:"total",render:function(e){return e.total?e.total:0}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Be,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Be," Response"),t);var n=t.financialsObj.totalByLicenseeList||[],o=t.totalCount||0,i=[];r((function(e){return console.log(typeof e,typeof n),i=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",i),i})),s(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(Be," Error"),e),o(e)}))}))}}))},Ze="".concat("http://localhost:5000","/admin/financial/trailer"),$e=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Ke=function(e){var t=$e(),a=o.a.useState([]),n=Object(p.a)(a,2),r=(n[0],n[1]),i=o.a.useState(0),l=Object(p.a)(i,2),s=(l[0],l[1]),d=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Financials per Rental Item",tableRef:d,columns:[{title:"Rented Item",field:"rentedItem",render:function(e){return e.rentedItem}},{title:"Rented Item Name",field:"rentedItemName",render:function(e){return e.rentedItemName}},{title:"Total",field:"total",render:function(e){return e.total?e.total:0}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Ze,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Ze," Response"),t);var n=t.financialsObj.totalByItemList||[],o=t.totalCount||0,i=[];r((function(e){return console.log(typeof e,typeof n),i=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",i),i})),s(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(Ze," Error"),e),o(e)}))}))}}))},Xe=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),et="".concat("http://localhost:5000","/admin/licensees"),tt="".concat("http://localhost:5000","/admin/licensee/verify/proofOfIncorporation"),at="".concat("http://localhost:5000","/admin/licensee/otp/resend"),nt="".concat("http://localhost:5000","/admin/licensee/otp/verify"),ot="".concat("http://localhost:5000","/admin/licensee/email/verify/resend");"".concat("http://localhost:5000","/admin/licensee/employee/password/forgot"),"".concat("http://localhost:5000","/admin/licensee/employee/password/reset");function rt(e){return console.log("TableActionButton",e),o.a.createElement("span",null,e.title)}function it(e){var t=Xe(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=(i.state||{from:{pathname:"/"}}).from;a.acl.LICENSEE.includes("VIEW")||r.replace(l);var d=o.a.useState([]),u=Object(p.a)(d,2),m=(u[0],u[1]),h=o.a.useState(0),f=Object(p.a)(h,2),b=(f[0],f[1]),g={licenseeId:"",mobile:"",country:M.country},y=Object(n.useState)(!1),v=Object(p.a)(y,2),O=v[0],j=v[1],C=Object(n.useState)(""),S=Object(p.a)(C,2),w=S[0],I=S[1],T=Object(n.useState)(""),k=Object(p.a)(T,2),N=k[0],x=k[1],A=Object(n.useState)(g),H=Object(p.a)(A,2),Y=H[0],U=H[1];function J(){j(!1)}var z=o.a.createRef();return o.a.createElement("div",{className:"t2y-list t2y-licenseelist ".concat(t.root)},o.a.createElement(P.a,{open:O,onClose:J,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0},o.a.createElement(F.a,{id:"form-dialog-title"},"OTP Verification"),o.a.createElement(W.a,null,o.a.createElement(q.a,null,"Please Enter OTP"),""!==N&&o.a.createElement(q.a,null,N),o.a.createElement(V.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"name",label:"OTP",type:"otp",value:w,onChange:function(e){I(e.target.value)}})),o.a.createElement(_.a,null,o.a.createElement(E.a,{onClick:J,color:"primary"},"Cancel"),o.a.createElement(E.a,{onClick:function(){var e={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({licenseeId:Y.licenseeId,mobile:Y.mobile,country:Y.country,otp:w})};console.log("requestOptions",e),fetch(nt,e).then((function(e){return e.json()})).then((function(e){console.log("".concat(nt," Response"),e),z.current&&z.current.onQueryChange(),x("OTP Verified Successfully"),U(g),setTimeout((function(){J()}),5e3)})).catch((function(e){console.log("".concat(nt," Error"),e)}))},color:"primary"},"Verify"))),o.a.createElement(R.a,{title:"Licensee",tableRef:z,columns:[{title:"ID",field:"licenseeRef",render:function(e){return e.licenseeRef}},{title:"Name",field:"name",render:function(e){return e.name}},{title:"Email",field:"email",render:function(e){return e.email}},{title:"Email Verified",field:"isEmailVerified",render:function(e){return e.isEmailVerified?"Yes":"No"}},{title:"Mobile",field:"mobile",render:function(e){return e.mobile}},{title:"Mobile Verified",field:"isMobileVerified",render:function(e){return e.isMobileVerified?"Yes":"No"}},{title:"Trailers",field:"trailers",render:function(e){return o.a.createElement("div",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/licensee/".concat(e._id,"/trailers")},"View Trailers"))}},{title:"Upsell Items",field:"upsellItems",render:function(e){return o.a.createElement("div",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/licensee/".concat(e._id,"/upsellitems")},"View Upsell Items"))}},{title:"Proof of Incorporation",field:"proofOfIncorporation",render:function(e){return o.a.createElement("div",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.proofOfIncorporation},"Download"))}},{title:"Proof of Incorporation Verified",field:"proofOfIncorporationVerified",type:"boolean",render:function(e){return e.verified?"Yes":"No"}},{title:"Proof of Incorporation Accepted",field:"proofOfIncorporationAccepted",render:function(e){return e.accepted?"Yes":"No"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(et,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(et," Response"),t);var n=t.licenseeList||[],o=t.totalCount||0,r=[];m((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),b(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(et," Error"),e),o(e)}))}))},actions:[function(e){return{icon:function(){return o.a.createElement(rt,{title:"Approve Proof of Incorporation"})},tooltip:"Approve Proof of Incorporation",disabled:!e.proofOfIncorporation,onClick:function(e,t){console.log("Approve onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({licenseeId:t._id,isAccepted:!0})};console.log("requestOptions",a),fetch(tt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(tt," Response"),e),z.current&&z.current.onQueryChange()})).catch((function(e){console.log("".concat(tt," Error"),e)}))}}},function(e){return{icon:function(){return o.a.createElement(rt,{title:"Reject Proof of Incorporation"})},tooltip:"Reject Proof of Incorporation",disabled:!e.proofOfIncorporation,onClick:function(e,t){console.log("Reject onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({licenseeId:t._id,isAccepted:!1})};console.log("requestOptions",a),fetch(tt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(tt," Response"),e),z.current&&z.current.onQueryChange()})).catch((function(e){console.log("".concat(tt," Error"),e)}))}}},function(e){return{icon:function(){return o.a.createElement(rt,{title:"Resend OTP"})},tooltip:"Resend OTP",onClick:function(e,t){console.log("Resend OTP onClick",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({licenseeId:t._id,mobile:t.mobile,country:t.address.country||M.country})};console.log("requestOptions",a),fetch(at,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(at," Response"),e),z.current&&z.current.onQueryChange(),U({customerId:t._id,mobile:t.mobile,country:t.address.country||M.country}),j(!0)})).catch((function(e){console.log("".concat(at," Error"),e)}))}}},function(e){return{icon:function(){return o.a.createElement(rt,{title:"Verify Email"})},tooltip:"Verify Email",onClick:function(e,t){console.log("Verify Email",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({licenseeId:t._id,email:t.email})};console.log("requestOptions",a),fetch(ot,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(ot," Response"),e),z.current&&z.current.onQueryChange()})).catch((function(e){console.log("".concat(ot," Error"),e)}))}}},{icon:"create",tooltip:"Edit Licensee",onClick:function(e,t){console.log("Edit onClick",e,t),r.push("/licensee/edit/".concat(t._id))}},{icon:"add_circle",tooltip:"Add Licensee",isFreeAction:!0,onClick:function(e,t){console.log("Licensee Signup onClick",e,t),r.push("/licensee/signup")}}],options:{actionsColumnIndex:-1}}))}var lt=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}})),ct="".concat("http://localhost:5000","/admin/licensee");function st(e){console.log("LicenseeSignup",e);var t=lt(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=(i.state||{from:{pathname:"/"}}).from;a.acl.LICENSEE.includes("ADD")||r.replace(l);var d={licensee:{name:"",email:"",isEmailVerified:!1,mobile:"",isMobileVerified:!1,country:M.country,businessType:M.businessType[0],address:{text:"",pincode:"",coordinates:"",city:"",state:M.states[0],country:M.country},radius:100,bsbNumber:"",availability:!0,workingDays:M.days,workingHours:M.hours,workingHoursStart:M.hoursStart,workingHoursEnd:M.hoursEnd,stripeAccountId:"",stripeAccountVerified:!1,accountNumber:"",mcc:"",tosAcceptanceDate:"",tosAcceptanceIP:"",taxId:"",logoLink:"",proofOfIncorporationLink:"",logo:null,proofOfIncorporation:null},employee:{name:"",email:"",isEmailVerified:!1,mobile:"",isMobileVerified:!1,country:M.country,dob:te()().subtract(18,"years").format("YYYY-MM-DD"),address:{text:"",pincode:"",coordinates:"",city:"",state:M.states[0],country:M.country},driverLicense:{card:"",expiry:te()().add(1,"year").format("YYYY-MM"),state:M.states[0],scanLink:""},photoLink:"",additionalDocumentLink:"",photo:null,driverLicenseScan:null,additionalDocument:null}},u=Object(n.useState)(0),h=Object(p.a)(u,2),f=(h[0],h[1],Object(n.useState)(d)),g=Object(p.a)(f,2),y=g[0],O=g[1],j=Object(n.useState)(""),C=Object(p.a)(j,2),S=C[0],w=C[1],I=Object(n.useState)(""),T=Object(p.a)(I,2),k=T[0],N=T[1],x=Object(n.useState)({licensee:{name:"",email:"",mobile:"",country:"",businessType:"",address:{text:"",pincode:"",coordinates:"",city:"",state:"",country:""},radius:"",bsbNumber:"",availability:"",workingDays:"",workingHoursStart:"",workingHoursEnd:"",stripeAccountId:"",stripeAccountVerified:"",accountNumber:"",mcc:"",tosAcceptanceDate:"",tosAcceptanceIP:"",taxId:"",logo:"",proofOfIncorporation:""},employee:{name:"",email:"",mobile:"",country:"",dob:"",address:{text:"",pincode:"",coordinates:"",city:"",state:"",country:""},driverLicense:{card:"",expiry:"",state:""},photo:"",driverLicenseScan:"",additionalDocument:""}}),L=Object(p.a)(x,2),A=L[0];L[1];function R(){return(R=Object(X.a)(K.a.mark((function e(t){var a,n,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""!==A.licensee.name||""!==A.licensee.email||""!==A.licensee.mobile||""!==A.licensee.country||""!==A.licensee.businessType||""!==A.licensee.address.text||""!==A.licensee.address.pincode||""!==A.licensee.address.coordinates||""!==A.licensee.address.city||""!==A.licensee.address.state||""!==A.licensee.address.country||""!==A.licensee.radius||""!==A.licensee.bsbNumber||""!==A.licensee.availability||""!==A.licensee.workingDays||""!==A.licensee.workingHoursStart||""!==A.licensee.workingHoursEnd||""!==A.licensee.stripeAccountId||""!==A.licensee.stripeAccountVerified||""!==A.licensee.accountNumber||""!==A.licensee.mcc||""!==A.licensee.tosAcceptanceDate||""!==A.licensee.tosAcceptanceIP||""!==A.licensee.taxId||""!==A.licensee.logo||""!==A.licensee.proofOfIncorporation||""!==A.employee.name||""!==A.employee.email||""!==A.employee.mobile||""!==A.employee.country||""!==A.employee.dob||""!==A.employee.address.text||""!==A.employee.address.pincode||""!==A.employee.address.coordinates||""!==A.employee.address.city||""!==A.employee.address.state||""!==A.employee.address.country||""!==A.employee.driverLicense.card||""!==A.employee.driverLicense.expiry||""!==A.employee.driverLicense.state||""!==A.employee.photo||""!==A.employee.driverLicenseScan||""!==A.employee.additionalDocument)){e.next=4;break}return e.abrupt("return",!1);case 4:console.log("licenseeSignup.employee.driverLicense.expiry",y.employee.driverLicense.expiry),y.employee.dob=te()(y.employee.dob).format("YYYY-MM-DD"),y.employee.driverLicense.expiry=te()(y.employee.driverLicense.expiry,"YYYY-MM").format("MM/YY"),console.log("licenseeSignup.employee.driverLicense.expiry",y.employee.driverLicense.expiry),y.licensee.workingHours="".concat(y.licensee.workingHoursStart.replace(":",""),"-").concat(y.licensee.workingHoursEnd.replace(":","")),(a=new FormData).append("reqBody",JSON.stringify(y)),y.licensee.logo&&a.append("licenseeLogo",y.licensee.logo,y.licensee.logo.name),y.licensee.proofOfIncorporation&&a.append("licenseeProofOfIncorporation",y.licensee.proofOfIncorporation,y.licensee.proofOfIncorporation.name),y.employee.photo&&a.append("employeePhoto",y.employee.photo,y.employee.photo.name),y.employee.driverLicenseScan&&a.append("employeeDriverLicenseScan",y.employee.driverLicenseScan,y.employee.driverLicenseScan.name),y.employee.additionalDocument&&a.append("employeeAdditionalDocumentScan",y.employee.additionalDocument,y.employee.additionalDocument.name),n={method:"POST",headers:Object(D.a)({},c()),body:a},console.log("requestOptions",n),o=ct,fetch(o,n).then((function(e){return e.json()})).then((function(e){if(console.log("".concat(o," Response"),e),e.success){e.licenseeObj,e.employeeObj;N(""),w("Successfully saved Licensee data"),setTimeout((function(){w(""),r.push("/licensees")}),5e3)}y.employee.driverLicense.expiry=te()().add(1,"year").format("YYYY-MM")})).catch((function(e){console.log("".concat(o," Error"),e),N("Error occurred while saving Licensee data")}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Licensee Signup"),""!==S&&o.a.createElement(v.a,{component:"h6",variant:"h5"},S),""!==k&&o.a.createElement(v.a,{component:"h6",variant:"h5"},k),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{component:"h5"},"Licensee"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-name",label:"Name",name:"licensee-name",autoComplete:"licensee-name",autoFocus:!0,error:""!==A.licensee.name,helperText:A.licensee.name,value:y.licensee.name,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{name:e.target.value})}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-email",label:"Email",name:"licensee-email",autoComplete:"licensee-email",autoFocus:!0,error:""!==A.licensee.email,helperText:A.licensee.email,value:y.licensee.email,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{email:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:y.licensee.isEmailVerified,name:"licensee-isEmailVerified",onChange:function(e){console.log("onChange isEmailVerified",e),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{isEmailVerified:!y.licensee.isEmailVerified})}))}}),label:"Is Email Verified?"})),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-mobile",label:"Mobile",name:"licensee-mobile",autoComplete:"licensee-mobile",autoFocus:!0,error:""!==A.licensee.mobile,helperText:A.licensee.mobile,value:y.licensee.mobile,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{mobile:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:y.licensee.isMobileVerified,name:"licensee-isMobileVerified",onChange:function(e){console.log("onChange isMobileVerified",e),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{isMobileVerified:!y.licensee.isMobileVerified})}))}}),label:"Is Mobile Verified?"})),M.businessType&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-businessType-label"},"Business Type"),o.a.createElement(ie.a,{labelId:"licensee-businessType-label",id:"licensee-businessType-Select",value:y.licensee.businessType,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{businessType:e.target.value})}))},className:t.selectEmpty},M.businessType.map((function(e,t){return console.log("businessType",e,t),o.a.createElement(b.a,{key:"businessType-".concat(t),value:e},e)})))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Address"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_text",label:"Address Line",name:"licensee-address_text",autoComplete:"licensee-address_text",autoFocus:!0,error:""!==A.licensee.address.text,helperText:A.licensee.address.text,value:y.licensee.address.text,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{address:Object(D.a)({},y.licensee.address,{text:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_pincode",label:"Pincode",name:"licensee-address_pincode",autoComplete:"licensee-address_pincode",autoFocus:!0,error:""!==A.licensee.address.pincode,helperText:A.licensee.address.pincode,value:y.licensee.address.pincode,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{address:Object(D.a)({},y.licensee.address,{pincode:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_coordinates",label:"Coordinates (Latitude,Longitude format)",name:"licensee-address_coordinates",autoComplete:"licensee-address_coordinates",autoFocus:!0,error:""!==A.licensee.address.coordinates,helperText:A.licensee.address.coordinates,value:y.licensee.address.coordinates,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{address:Object(D.a)({},y.licensee.address,{coordinates:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_city",label:"City",name:"licensee-address_city",autoComplete:"licensee-address_city",autoFocus:!0,error:""!==A.licensee.address.city,helperText:A.licensee.address.city,value:y.licensee.address.city,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{address:Object(D.a)({},y.licensee.address,{city:e.target.value})})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-address_state-label"},"State"),o.a.createElement(ie.a,{labelId:"licensee-address_state-label",id:"licensee-address_state-Select",value:y.licensee.address.state,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{address:Object(D.a)({},y.licensee.address,{state:e.target.value})})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"state-".concat(t),value:e},e)}))))),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-radius",label:"Radius for Trailer Dropoff ( in kilometers )",name:"licensee-radius",autoComplete:"licensee-radius",autoFocus:!0,error:""!==A.licensee.radius,helperText:A.licensee.radius,value:y.licensee.radius,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{radius:parseInt(e.target.value)})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:y.licensee.availability,name:"licensee-availability",onChange:function(e){console.log("onChange availability",e),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{availability:!y.licensee.availability})}))}}),label:"Is Licensee Available?"}),o.a.createElement(ce.a,{className:"SectionContainer"},M.days&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-workingDays-label"},"Working Days"),o.a.createElement(ie.a,{multiple:!0,labelId:"licensee-workingDays-label",id:"licensee-workingDays-Select",value:y.licensee.workingDays,onChange:function(e){console.log("e.target",e.target),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{workingDays:e.target.value})}))},className:t.selectEmpty},M.days.map((function(e,t){return console.log("day",e,t),o.a.createElement(b.a,{key:"day-".concat(t),value:e},e)})))),o.a.createElement("label",null,"Working Hours"),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"WorkingHours Start",required:!0,fullWidth:!0,type:"time",id:"licensee-workingHours-start",label:"WorkingHours Start",name:"licensee-workingHours-start",autoComplete:"licensee-workingHours-start",autoFocus:!0,error:""!==A.licensee.workingHoursStart,helperText:A.licensee.workingHoursStart,value:y.licensee.workingHoursStart,onChange:function(e){console.log("WorkingHours Start",e.target.value),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{workingHoursStart:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"WorkingHours End",required:!0,fullWidth:!0,type:"time",id:"licensee-workingHours-end",label:"WorkingHours End",name:"licensee-workingHours-end",autoComplete:"licensee-workingHours-end",autoFocus:!0,error:""!==A.licensee.workingHoursEnd,helperText:A.licensee.workingHoursEnd,value:y.licensee.workingHoursEnd,onChange:function(e){console.log("WorkingHours End",e.target.value),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{workingHoursEnd:e.target.value})}))}})),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-bsbNumber",label:"BSB Number",name:"licensee-bsbNumber",autoComplete:"licensee-bsbNumber",autoFocus:!0,error:""!==A.licensee.bsbNumber,helperText:A.licensee.bsbNumber,value:y.licensee.bsbNumber,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{bsbNumber:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-accountNumber",label:"Account Number",name:"licensee-accountNumber",autoComplete:"licensee-accountNumber",autoFocus:!0,error:""!==A.licensee.accountNumber,helperText:A.licensee.accountNumber,value:y.licensee.accountNumber,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{accountNumber:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"url",id:"licensee-url",label:"Website URL",name:"licensee-url",autoComplete:"licensee-url",autoFocus:!0,error:""!==A.licensee.url,helperText:A.licensee.url,value:y.licensee.url,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{url:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"licensee-taxId",label:"Tax ID",name:"licensee-taxId",autoComplete:"licensee-taxId",autoFocus:!0,error:""!==A.licensee.taxId,helperText:A.licensee.taxId,value:y.licensee.taxId,onChange:function(e){O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{taxId:e.target.value})}))}}),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Logo"),y.licensee.logoLink&&!y.licensee.logo&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:y.licensee.logoLink},"Logo")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"licensee-logo",multiple:!0,type:"file",name:"licensee-logo",onChange:function(e){console.log("licensee-logo",e.target.files),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{photo:e.target.files[0]})}))}})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Proof Of Incorporation"),y.licensee.proofOfIncorporationLink&&!y.licensee.proofOfIncorporation&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:y.licensee.proofOfIncorporationLink},"Proof Of Incorporation")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, image/pdf",id:"licensee-proofOfIncorporation",multiple:!0,type:"file",name:"licensee-proofOfIncorporation",onChange:function(e){console.log("licensee-proofOfIncorporation",e.target.files),O(Object(D.a)({},y,{licensee:Object(D.a)({},y.licensee,{proofOfIncorporation:e.target.files[0]})}))}}))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{component:"h5"},"Employee"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-name",label:"Name",name:"employee-name",autoComplete:"employee-name",autoFocus:!0,error:""!==A.employee.name,helperText:A.employee.name,value:y.employee.name,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{name:e.target.value})}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-email",label:"Email",name:"employee-email",autoComplete:"employee-email",autoFocus:!0,error:""!==A.employee.email,helperText:A.employee.email,value:y.employee.email,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{email:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:y.employee.isEmailVerified,name:"employee-isEmailVerified",onChange:function(e){console.log("onChange isEmailVerified",e),O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{isEmailVerified:!y.employee.isEmailVerified})}))}}),label:"Is Email Verified?"})),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-mobile",label:"Mobile",name:"employee-mobile",autoComplete:"employee-mobile",autoFocus:!0,error:""!==A.employee.mobile,helperText:A.employee.mobile,value:y.employee.mobile,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{mobile:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:y.employee.isMobileVerified,name:"employee-isMobileVerified",onChange:function(e){console.log("onChange isMobileVerified",e),O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{isMobileVerified:!y.employee.isMobileVerified})}))}}),label:"Is Mobile Verified?"})),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"Date of Birth",required:!0,fullWidth:!0,type:"date",id:"employee-dob",label:"Date Of Birth",name:"employee-dob",autoComplete:"employee-dob",autoFocus:!0,error:""!==A.employee.dob,helperText:A.employee.dob,value:y.employee.dob,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{dob:e.target.value})}))}}),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Address"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_text",label:"Address Line",name:"employee-address_text",autoComplete:"employee-address_text",autoFocus:!0,error:""!==A.employee.address.text,helperText:A.employee.address.text,value:y.employee.address.text,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{address:Object(D.a)({},y.employee.address,{text:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_pincode",label:"Pincode",name:"employee-address_pincode",autoComplete:"employee-address_pincode",autoFocus:!0,error:""!==A.employee.address.pincode,helperText:A.employee.address.pincode,value:y.employee.address.pincode,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{address:Object(D.a)({},y.employee.address,{pincode:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_coordinates",label:"Coordinates (Latitude,Longitude format)",name:"employee-address_coordinates",autoComplete:"employee-address_coordinates",autoFocus:!0,error:""!==A.employee.address.coordinates,helperText:A.employee.address.coordinates,value:y.employee.address.coordinates,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{address:Object(D.a)({},y.employee.address,{coordinates:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_city",label:"City",name:"employee-address_city",autoComplete:"employee-address_city",autoFocus:!0,error:""!==A.employee.address.city,helperText:A.employee.address.city,value:y.employee.address.city,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{address:Object(D.a)({},y.employee.address,{city:e.target.value})})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"employee-address_state-label"},"State"),o.a.createElement(ie.a,{labelId:"employee-address_state-label",id:"employee-address_state-Select",value:y.employee.address.state,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{address:Object(D.a)({},y.employee.address,{state:e.target.value})})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"employee-state-".concat(t),value:e},e)}))))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Driver License"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-driverLicense_card",label:"Driver License Number",name:"employee-driverLicense_card",autoComplete:"employee-driverLicense_card",autoFocus:!0,error:""!==A.employee.driverLicense.card,helperText:A.employee.driverLicense.card,value:y.employee.driverLicense.card,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{driverLicense:Object(D.a)({},y.employee.driverLicense,{card:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"month",id:"employee-driverLicense_expiry",label:"Expiry Date",name:"employee-driverLicense_expiry",autoComplete:"employee-driverLicense_expiry",autoFocus:!0,error:""!==A.employee.driverLicense.expiry,helperText:A.employee.driverLicense.expiry,value:y.employee.driverLicense.expiry,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{driverLicense:Object(D.a)({},y.employee.driverLicense,{expiry:e.target.value})})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"employee-driverLicense_state-label"},"State"),o.a.createElement(ie.a,{labelId:"employee-driverLicense_state-label",id:"employee-driverLicense_state-Select",value:y.employee.driverLicense.state,onChange:function(e){O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{driverLicense:Object(D.a)({},y.employee.driverLicense,{state:e.target.value})})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"driverLicense-state-".concat(t),value:e},e)})))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Scan ( Scan of Front and Back side of Driver License in a single File )"),y.employee.driverLicense.scanLink&&!y.employee.driverLicenseScan&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:y.employee.driverLicense.scanLink},"Scan")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, application/pdf",id:"employee-driverLicenseScan",type:"file",name:"employee-driverLicenseScan",onChange:function(e){console.log("employee-driverLicenseScan",e.target.files),O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{driverLicenseScan:e.target.files[0]})}))}}))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Photo"),y.employee.photoLink&&!y.employee.photo&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:y.employee.photoLink},"Photo")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"employee-photo",type:"file",name:"employee-photo",onChange:function(e){console.log("employee-photo",e.target.files),O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{photo:e.target.files[0]})}))}})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Additional Document"),y.employee.additionalDocumentLink&&!y.employee.additionalDocument&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:y.employee.additionalDocumentLink},"Additional Document")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, application/pdf",id:"employee-additionalDocument",type:"file",name:"employee-additionalDocument",onChange:function(e){console.log("employee-additionalDocument",e.target.files),O(Object(D.a)({},y,{employee:Object(D.a)({},y.employee,{additionalDocument:e.target.files[0]})}))}}))),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return R.apply(this,arguments)}},"Signup"))))}var dt=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}})),ut="".concat("http://localhost:5000","/admin/licensee"),mt="".concat("http://localhost:5000","/admin/licensee");function pt(e){console.log("LicenseeEdit",e);var t=dt(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)().licenseeId;console.log("licenseeId",l);var d=(i.state||{from:{pathname:"/"}}).from;l&&!a.acl.LICENSEE.includes("UPDATE")&&r.replace(d);var u={licensee:{name:"",email:"",isEmailVerified:!1,mobile:"",isMobileVerified:!1,country:M.country,businessType:M.businessType[0],address:{text:"",pincode:"",coordinates:"",city:"",state:M.states[0],country:M.country},radius:100,availability:!0,workingDays:M.days,workingHours:M.hours,workingHoursStart:M.hoursStart,workingHoursEnd:M.hoursEnd,bsbNumber:"",accountNumber:"",taxId:"",stripeAccountId:"",stripeAccountVerified:!1,mcc:"",productDescription:"",tosAcceptanceDate:"",tosAcceptanceIP:"",logoLink:"",proofOfIncorporationLink:"",logo:null,proofOfIncorporation:null}},h=Object(n.useState)(0),f=Object(p.a)(h,2),g=f[0],y=(f[1],Object(n.useState)(u)),O=Object(p.a)(y,2),j=O[0],C=O[1],S=Object(n.useState)(""),w=Object(p.a)(S,2),I=w[0],T=w[1],k=Object(n.useState)(""),N=Object(p.a)(k,2),x=N[0],L=N[1];Object(n.useEffect)((function(){if(l){var e={method:"GET",headers:c()};fetch("".concat(ut,"?id=").concat(l),e).then((function(e){return e.json()})).then((function(e){console.log("Customer API Call Response",e.customerObj);var t=e.licenseeObj,a=t.workingHours.split("-"),n="".concat(a[0].substring(0,2),":").concat(a[0].substring(2,4)),o="".concat(a[1].substring(0,2),":").concat(a[1].substring(2,4));C({licensee:{name:t.name,email:t.email,isEmailVerified:t.isEmailVerified,mobile:t.mobile,isMobileVerified:t.isMobileVerified,country:t.country,businessType:t.businessType,address:{text:t.address.text,pincode:t.address.pincode,coordinates:t.address.coordinates.join(","),city:t.address.city,state:t.address.state,country:t.address.country},radius:t.radius,availability:t.availability,workingDays:t.workingDays,workingHours:t.workingHours,workingHoursStart:n,workingHoursEnd:o,bsbNumber:t.bsbNumber,accountNumber:t.accountNumber,taxId:t.taxId,stripeAccountId:t.stripeAccountId,stripeAccountVerified:t.stripeAccountVerified,mcc:t.mcc,productDescription:t.productDescription,tosAcceptanceDate:t.tosAcceptanceDate,tosAcceptanceIP:t.tosAcceptanceIP,logoLink:t.logo,proofOfIncorporationLink:t.proofOfIncorporation,logo:null,proofOfIncorporation:null}})})).catch((function(e){console.log("Error occurred while fetching Licensee data",e)}))}}),[g]);var A=Object(n.useState)({licensee:{name:"",email:"",mobile:"",country:"",businessType:"",address:{text:"",pincode:"",coordinates:"",city:"",state:"",country:""},radius:"",availability:"",workingDays:"",workingHoursStart:"",workingHoursEnd:"",bsbNumber:"",accountNumber:"",taxId:"",stripeAccountId:"",stripeAccountVerified:"",mcc:"",productDescription:"",tosAcceptanceDate:"",tosAcceptanceIP:"",logo:"",proofOfIncorporation:""}}),R=Object(p.a)(A,2),P=R[0];R[1];function F(){return(F=Object(X.a)(K.a.mark((function e(t){var a,n,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""!==P.licensee.name||""!==P.licensee.email||""!==P.licensee.mobile||""!==P.licensee.country||""!==P.licensee.businessType||""!==P.licensee.address.text||""!==P.licensee.address.pincode||""!==P.licensee.address.coordinates||""!==P.licensee.address.city||""!==P.licensee.address.state||""!==P.licensee.address.country||""!==P.licensee.radius||""!==P.licensee.availability||""!==P.licensee.workingDays||""!==P.licensee.workingHoursStart||""!==P.licensee.workingHoursEnd||""!==P.licensee.bsbNumber||""!==P.licensee.accountNumber||""!==P.licensee.taxId||""!==P.licensee.stripeAccountId||""!==P.licensee.stripeAccountVerified||""!==P.licensee.mcc||""!==P.licensee.productDescription||""!==P.licensee.tosAcceptanceDate||""!==P.licensee.tosAcceptanceIP||""!==P.licensee.logo||""!==P.licensee.proofOfIncorporation)){e.next=4;break}return e.abrupt("return",!1);case 4:j.licensee.workingHours="".concat(j.licensee.workingHoursStart.replace(":",""),"-").concat(j.licensee.workingHoursEnd.replace(":","")),(a=new FormData).append("reqBody",JSON.stringify(j.licensee)),j.licensee.logo&&a.append("licenseeLogo",j.licensee.logo,j.licensee.logo.name),j.licensee.proofOfIncorporation&&a.append("licenseeProofOfIncorporation",j.licensee.proofOfIncorporation,j.licensee.proofOfIncorporation.name),n={method:"PUT",headers:Object(D.a)({},c()),body:a},console.log("requestOptions",n),o=mt,fetch(o,n).then((function(e){return e.json()})).then((function(e){if(console.log("".concat(o," Response"),e),e.success){e.licenseeObj,e.employeeObj;L(""),T("Successfully saved Licensee data"),setTimeout((function(){T(""),r.push("/licensees")}),5e3)}j.employee.driverLicense.expiry=te()().add(1,"year").format("YYYY-MM")})).catch((function(e){console.log("".concat(o," Error"),e),L("Error occurred while saving Licensee data")}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Licensee Signup"),""!==I&&o.a.createElement(v.a,{component:"h6",variant:"h5"},I),""!==x&&o.a.createElement(v.a,{component:"h6",variant:"h5"},x),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{component:"h5"},"Licensee"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-name",label:"Name",name:"licensee-name",autoComplete:"licensee-name",autoFocus:!0,error:""!==P.licensee.name,helperText:P.licensee.name,value:j.licensee.name,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{name:e.target.value})}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-email",label:"Email",name:"licensee-email",autoComplete:"licensee-email",autoFocus:!0,error:""!==P.licensee.email,helperText:P.licensee.email,value:j.licensee.email,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{email:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:j.licensee.isEmailVerified,name:"licensee-isEmailVerified",onChange:function(e){console.log("onChange isEmailVerified",e),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{isEmailVerified:!j.licensee.isEmailVerified})}))}}),label:"Is Email Verified?"})),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-mobile",label:"Mobile",name:"licensee-mobile",autoComplete:"licensee-mobile",autoFocus:!0,error:""!==P.licensee.mobile,helperText:P.licensee.mobile,value:j.licensee.mobile,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{mobile:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:j.licensee.isMobileVerified,name:"licensee-isMobileVerified",onChange:function(e){console.log("onChange isMobileVerified",e),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{isMobileVerified:!j.licensee.isMobileVerified})}))}}),label:"Is Mobile Verified?"})),M.businessType&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-businessType-label"},"Business Type"),o.a.createElement(ie.a,{labelId:"licensee-businessType-label",id:"licensee-businessType-Select",value:j.licensee.businessType,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{businessType:e.target.value})}))},className:t.selectEmpty},M.businessType.map((function(e,t){return console.log("businessType",e,t),o.a.createElement(b.a,{key:"businessType-".concat(t),value:e},e)})))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Address"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_text",label:"Address Line",name:"licensee-address_text",autoComplete:"licensee-address_text",autoFocus:!0,error:""!==P.licensee.address.text,helperText:P.licensee.address.text,value:j.licensee.address.text,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{address:Object(D.a)({},j.licensee.address,{text:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_pincode",label:"Pincode",name:"licensee-address_pincode",autoComplete:"licensee-address_pincode",autoFocus:!0,error:""!==P.licensee.address.pincode,helperText:P.licensee.address.pincode,value:j.licensee.address.pincode,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{address:Object(D.a)({},j.licensee.address,{pincode:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_coordinates",label:"Coordinates (Latitude,Longitude format)",name:"licensee-address_coordinates",autoComplete:"licensee-address_coordinates",autoFocus:!0,error:""!==P.licensee.address.coordinates,helperText:P.licensee.address.coordinates,value:j.licensee.address.coordinates,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{address:Object(D.a)({},j.licensee.address,{coordinates:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_city",label:"City",name:"licensee-address_city",autoComplete:"licensee-address_city",autoFocus:!0,error:""!==P.licensee.address.city,helperText:P.licensee.address.city,value:j.licensee.address.city,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{address:Object(D.a)({},j.licensee.address,{city:e.target.value})})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-address_state-label"},"State"),o.a.createElement(ie.a,{labelId:"licensee-address_state-label",id:"licensee-address_state-Select",value:j.licensee.address.state,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{address:Object(D.a)({},j.licensee.address,{state:e.target.value})})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"state-".concat(t),value:e},e)}))))),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-radius",label:"Radius for Trailer Dropoff ( in kilometers )",name:"licensee-radius",autoComplete:"licensee-radius",autoFocus:!0,error:""!==P.licensee.radius,helperText:P.licensee.radius,value:j.licensee.radius,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{radius:parseInt(e.target.value)})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:j.licensee.availability,name:"licensee-availability",onChange:function(e){console.log("onChange availability",e),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{availability:!j.licensee.availability})}))}}),label:"Is Licensee Available?"}),o.a.createElement(ce.a,{className:"SectionContainer"},M.days&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-workingDays-label"},"Working Days"),o.a.createElement(ie.a,{multiple:!0,labelId:"licensee-workingDays-label",id:"licensee-workingDays-Select",value:j.licensee.workingDays,onChange:function(e){console.log("e.target",e.target),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{workingDays:e.target.value})}))},className:t.selectEmpty},M.days.map((function(e,t){return console.log("day",e,t),o.a.createElement(b.a,{key:"day-".concat(t),value:e},e)})))),o.a.createElement("label",null,"Working Hours"),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"WorkingHours Start",required:!0,fullWidth:!0,type:"time",id:"licensee-workingHours-start",label:"WorkingHours Start",name:"licensee-workingHours-start",autoComplete:"licensee-workingHours-start",autoFocus:!0,error:""!==P.licensee.workingHoursStart,helperText:P.licensee.workingHoursStart,value:j.licensee.workingHoursStart,onChange:function(e){console.log("WorkingHours Start",e.target.value),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{workingHoursStart:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"WorkingHours End",required:!0,fullWidth:!0,type:"time",id:"licensee-workingHours-end",label:"WorkingHours End",name:"licensee-workingHours-end",autoComplete:"licensee-workingHours-end",autoFocus:!0,error:""!==P.licensee.workingHoursEnd,helperText:P.licensee.workingHoursEnd,value:j.licensee.workingHoursEnd,onChange:function(e){console.log("WorkingHours End",e.target.value),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{workingHoursEnd:e.target.value})}))}})),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-bsbNumber",label:"BSB Number",name:"licensee-bsbNumber",autoComplete:"licensee-bsbNumber",autoFocus:!0,error:""!==P.licensee.bsbNumber,helperText:P.licensee.bsbNumber,value:j.licensee.bsbNumber,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{bsbNumber:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-accountNumber",label:"Account Number",name:"licensee-accountNumber",autoComplete:"licensee-accountNumber",autoFocus:!0,error:""!==P.licensee.accountNumber,helperText:P.licensee.accountNumber,value:j.licensee.accountNumber,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{accountNumber:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"url",id:"licensee-url",label:"Website URL",name:"licensee-url",autoComplete:"licensee-url",autoFocus:!0,error:""!==P.licensee.url,helperText:P.licensee.url,value:j.licensee.url,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{url:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"licensee-taxId",label:"Tax ID",name:"licensee-taxId",autoComplete:"licensee-taxId",autoFocus:!0,error:""!==P.licensee.taxId,helperText:P.licensee.taxId,value:j.licensee.taxId,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{taxId:e.target.value})}))}}),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Logo"),j.licensee.logoLink&&!j.licensee.logo&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:j.licensee.logoLink},"Logo")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"licensee-logo",multiple:!0,type:"file",name:"licensee-logo",onChange:function(e){console.log("licensee-logo",e.target.files),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{photo:e.target.files[0]})}))}})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Proof Of Incorporation"),j.licensee.proofOfIncorporationLink&&!j.licensee.proofOfIncorporation&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:j.licensee.proofOfIncorporationLink},"Proof Of Incorporation")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, image/pdf",id:"licensee-proofOfIncorporation",multiple:!0,type:"file",name:"licensee-proofOfIncorporation",onChange:function(e){console.log("licensee-proofOfIncorporation",e.target.files),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{proofOfIncorporation:e.target.files[0]})}))}})),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,disabled:!0,id:"licensee-stripeAccountId",label:"Stripe Account ID",name:"licensee-stripeAccountId",autoComplete:"licensee-stripeAccountId",autoFocus:!0,error:""!==P.licensee.stripeAccountId,helperText:P.licensee.stripeAccountId,value:j.licensee.stripeAccountId,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{stripeAccountId:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:j.licensee.stripeAccountVerified,name:"licensee-stripeAccountVerified",onChange:function(e){console.log("onChange stripeAccountVerified",e),C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{stripeAccountVerified:!j.licensee.stripeAccountVerified})}))}}),label:"Is Stripe Account Verified?"}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,disabled:!0,id:"licensee-mcc",label:"MCC",name:"licensee-mcc",autoComplete:"licensee-mcc",autoFocus:!0,error:""!==P.licensee.mcc,helperText:P.licensee.mcc,value:j.licensee.mcc,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{mcc:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,disabled:!0,id:"licensee-productDescription",label:"Product Description",name:"licensee-productDescription",autoComplete:"licensee-productDescription",autoFocus:!0,error:""!==P.licensee.productDescription,helperText:P.licensee.productDescription,value:j.licensee.productDescription,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{productDescription:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,disabled:!0,type:"date",id:"licensee-tosAcceptanceDate",label:"Acceptance Date",name:"licensee-tosAcceptanceDate",autoComplete:"licensee-tosAcceptanceDate",autoFocus:!0,error:""!==P.licensee.tosAcceptanceDate,helperText:P.licensee.tosAcceptanceDate,value:j.licensee.tosAcceptanceDate,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{tosAcceptanceDate:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,disabled:!0,id:"licensee-tosAcceptanceIP",label:"Acceptance Date",name:"licensee-tosAcceptanceIP",autoComplete:"licensee-tosAcceptanceIP",autoFocus:!0,error:""!==P.licensee.tosAcceptanceIP,helperText:P.licensee.tosAcceptanceIP,value:j.licensee.tosAcceptanceIP,onChange:function(e){C(Object(D.a)({},j,{licensee:Object(D.a)({},j.licensee,{tosAcceptanceIP:e.target.value})}))}})),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return F.apply(this,arguments)}},"Save"))))}var ht=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}})),ft="".concat("http://localhost:5000","/admin/licensee/employee"),bt="".concat("http://localhost:5000","/admin/licensee/employee");function gt(e){console.log("LicenseeEmployeeEdit",e);var t=ht(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)(),d=l.licenseeId,u=l.employeeId;console.log("licenseeId",d,"employeeId",u);var h=(i.state||{from:{pathname:"/"}}).from;d&&u&&a.acl.LICENSEEEMPLOYEE.includes("UPDATE")||r.replace(h);var f={employee:{name:"",email:"",isEmailVerified:!1,mobile:"",isMobileVerified:!1,country:M.country,dob:te()().subtract(18,"years").format("YYYY-MM-DD"),address:{text:"",pincode:"",coordinates:"",city:"",state:M.states[0],country:M.country},driverLicense:{card:"",expiry:te()().add(1,"year").format("YYYY-MM"),state:M.states[0],scanLink:""},isDeleted:!1,photoLink:"",additionalDocumentLink:"",photo:null,driverLicenseScan:null,additionalDocument:null}},g=Object(n.useState)(0),y=Object(p.a)(g,2),O=y[0],j=(y[1],Object(n.useState)(f)),C=Object(p.a)(j,2),S=C[0],w=C[1],I=Object(n.useState)(""),T=Object(p.a)(I,2),k=T[0],N=T[1],x=Object(n.useState)(""),L=Object(p.a)(x,2),A=L[0],R=L[1];function P(e){var t=e.split("/"),a="20".concat(t[1],"-").concat(t[0],"-01");return te()(a).format("YYYY-MM")}Object(n.useEffect)((function(){if(u){var e={method:"GET",headers:c()};fetch("".concat(ft,"?id=").concat(u),e).then((function(e){return e.json()})).then((function(e){console.log("Customer API Call Response",e.customerObj);var t=e.employeeObj;w({employee:{name:t.name,email:t.email,isEmailVerified:t.isEmailVerified,mobile:t.mobile,isMobileVerified:t.isMobileVerified,country:t.country,dob:te()(t.dob).format("YYYY-MM-DD"),address:{text:t.address.text,pincode:t.address.pincode,coordinates:t.address.coordinates.join(","),city:t.address.city,state:t.address.state,country:t.address.country},driverLicense:{card:t.driverLicense.card,expiry:P(t.driverLicense.expiry),state:t.driverLicense.state,scanLink:t.driverLicense.scan},photoLink:t.photo,additionalDocumentLink:t.additionalDocument,isDeleted:t.isDeleted,photo:null,driverLicenseScan:null,additionalDocument:null}})})).catch((function(e){console.log("Error occurred while fetching Licensee Employee data",e)}))}}),[O]);var F=Object(n.useState)({employee:{name:"",email:"",mobile:"",country:"",dob:"",address:{text:"",pincode:"",coordinates:"",city:"",state:"",country:""},driverLicense:{card:"",expiry:"",state:""},photo:"",driverLicenseScan:"",additionalDocument:""}}),W=Object(p.a)(F,2),q=W[0];W[1];function _(){return(_=Object(X.a)(K.a.mark((function e(t){var a,n,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""!==q.licensee.name||""!==q.licensee.email||""!==q.licensee.mobile||""!==q.licensee.country||""!==q.licensee.businessType||""!==q.licensee.address.text||""!==q.licensee.address.pincode||""!==q.licensee.address.coordinates||""!==q.licensee.address.city||""!==q.licensee.address.state||""!==q.licensee.address.country||""!==q.licensee.radius||""!==q.licensee.bsbNumber||""!==q.licensee.availability||""!==q.licensee.workingDays||""!==q.licensee.workingHoursStart||""!==q.licensee.workingHoursEnd||""!==q.licensee.stripeAccountId||""!==q.licensee.stripeAccountVerified||""!==q.licensee.accountNumber||""!==q.licensee.mcc||""!==q.licensee.tosAcceptanceDate||""!==q.licensee.tosAcceptanceIP||""!==q.licensee.taxId||""!==q.licensee.logo||""!==q.licensee.proofOfIncorporation||""!==q.employee.name||""!==q.employee.email||""!==q.employee.mobile||""!==q.employee.country||""!==q.employee.dob||""!==q.employee.address.text||""!==q.employee.address.pincode||""!==q.employee.address.coordinates||""!==q.employee.address.city||""!==q.employee.address.state||""!==q.employee.address.country||""!==q.employee.driverLicense.card||""!==q.employee.driverLicense.expiry||""!==q.employee.driverLicense.state||""!==q.employee.photo||""!==q.employee.driverLicenseScan||""!==q.employee.additionalDocument)){e.next=4;break}return e.abrupt("return",!1);case 4:console.log("licenseeSignup.employee.driverLicense.expiry",S.employee.driverLicense.expiry),S.employee.dob=te()(S.employee.dob).format("YYYY-MM-DD"),S.employee.driverLicense.expiry=te()(S.employee.driverLicense.expiry,"YYYY-MM").format("MM/YY"),console.log("licenseeSignup.employee.driverLicense.expiry",S.employee.driverLicense.expiry),S.licensee.workingHours="".concat(S.licensee.workingHoursStart.replace(":",""),"-").concat(S.licensee.workingHoursEnd.replace(":","")),(a=new FormData).append("reqBody",JSON.stringify(S)),S.employee.photo&&a.append("employeePhoto",S.employee.photo,S.employee.photo.name),S.employee.driverLicenseScan&&a.append("employeeDriverLicenseScan",S.employee.driverLicenseScan,S.employee.driverLicenseScan.name),S.employee.additionalDocument&&a.append("employeeAdditionalDocumentScan",S.employee.additionalDocument,S.employee.additionalDocument.name),n={method:"PUT",headers:Object(D.a)({},c()),body:a},console.log("requestOptions",n),o=bt,fetch(o,n).then((function(e){return e.json()})).then((function(e){if(console.log("".concat(o," Response"),e),e.success){var t=e.employeeObj;w({employee:{name:t.name,email:t.email,isEmailVerified:t.isEmailVerified,mobile:t.mobile,isMobileVerified:t.isMobileVerified,country:t.country,dob:te()(t.dob).format("YYYY-MM-DD"),address:{text:t.address.text,pincode:t.address.pincode,coordinates:t.address.coordinates.join(","),city:t.address.city,state:t.address.state,country:t.address.country},driverLicense:{card:t.driverLicense.card,expiry:P(t.driverLicense.expiry),state:t.driverLicense.state,scanLink:t.driverLicense.scan},isDeleted:t.isDeleted,photoLink:t.photo,additionalDocumentLink:t.additionalDocument,photo:null,driverLicenseScan:null,additionalDocument:null}}),R(""),N("Successfully saved Licensee data"),setTimeout((function(){N(""),r.push("/licensees")}),5e3)}S.employee.driverLicense.expiry=te()().add(1,"year").format("YYYY-MM")})).catch((function(e){console.log("".concat(o," Error"),e),R("Error occurred while saving Licensee data")}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Employee Edit"),""!==k&&o.a.createElement(v.a,{component:"h6",variant:"h5"},k),""!==A&&o.a.createElement(v.a,{component:"h6",variant:"h5"},A),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{component:"h5"},"Licensee"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-name",label:"Name",name:"licensee-name",autoComplete:"licensee-name",autoFocus:!0,error:""!==q.licensee.name,helperText:q.licensee.name,value:S.licensee.name,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{name:e.target.value})}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-email",label:"Email",name:"licensee-email",autoComplete:"licensee-email",autoFocus:!0,error:""!==q.licensee.email,helperText:q.licensee.email,value:S.licensee.email,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{email:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:S.licensee.isEmailVerified,name:"licensee-isEmailVerified",onChange:function(e){console.log("onChange isEmailVerified",e),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{isEmailVerified:!S.licensee.isEmailVerified})}))}}),label:"Is Email Verified?"})),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-mobile",label:"Mobile",name:"licensee-mobile",autoComplete:"licensee-mobile",autoFocus:!0,error:""!==q.licensee.mobile,helperText:q.licensee.mobile,value:S.licensee.mobile,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{mobile:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:S.licensee.isMobileVerified,name:"licensee-isMobileVerified",onChange:function(e){console.log("onChange isMobileVerified",e),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{isMobileVerified:!S.licensee.isMobileVerified})}))}}),label:"Is Mobile Verified?"})),M.businessType&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-businessType-label"},"Business Type"),o.a.createElement(ie.a,{labelId:"licensee-businessType-label",id:"licensee-businessType-Select",value:S.licensee.businessType,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{businessType:e.target.value})}))},className:t.selectEmpty},M.businessType.map((function(e,t){return console.log("businessType",e,t),o.a.createElement(b.a,{key:"businessType-".concat(t),value:e},e)})))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Address"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_text",label:"Address Line",name:"licensee-address_text",autoComplete:"licensee-address_text",autoFocus:!0,error:""!==q.licensee.address.text,helperText:q.licensee.address.text,value:S.licensee.address.text,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{address:Object(D.a)({},S.licensee.address,{text:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_pincode",label:"Pincode",name:"licensee-address_pincode",autoComplete:"licensee-address_pincode",autoFocus:!0,error:""!==q.licensee.address.pincode,helperText:q.licensee.address.pincode,value:S.licensee.address.pincode,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{address:Object(D.a)({},S.licensee.address,{pincode:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_coordinates",label:"Coordinates (Latitude,Longitude format)",name:"licensee-address_coordinates",autoComplete:"licensee-address_coordinates",autoFocus:!0,error:""!==q.licensee.address.coordinates,helperText:q.licensee.address.coordinates,value:S.licensee.address.coordinates,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{address:Object(D.a)({},S.licensee.address,{coordinates:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-address_city",label:"City",name:"licensee-address_city",autoComplete:"licensee-address_city",autoFocus:!0,error:""!==q.licensee.address.city,helperText:q.licensee.address.city,value:S.licensee.address.city,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{address:Object(D.a)({},S.licensee.address,{city:e.target.value})})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-address_state-label"},"State"),o.a.createElement(ie.a,{labelId:"licensee-address_state-label",id:"licensee-address_state-Select",value:S.licensee.address.state,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{address:Object(D.a)({},S.licensee.address,{state:e.target.value})})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"state-".concat(t),value:e},e)}))))),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-radius",label:"Radius for Trailer Dropoff ( in kilometers )",name:"licensee-radius",autoComplete:"licensee-radius",autoFocus:!0,error:""!==q.licensee.radius,helperText:q.licensee.radius,value:S.licensee.radius,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{radius:parseInt(e.target.value)})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:S.licensee.availability,name:"licensee-availability",onChange:function(e){console.log("onChange availability",e),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{availability:!S.licensee.availability})}))}}),label:"Is Licensee Available?"}),o.a.createElement(ce.a,{className:"SectionContainer"},M.days&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"licensee-workingDays-label"},"Working Days"),o.a.createElement(ie.a,{multiple:!0,labelId:"licensee-workingDays-label",id:"licensee-workingDays-Select",value:S.licensee.workingDays,onChange:function(e){console.log("e.target",e.target),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{workingDays:e.target.value})}))},className:t.selectEmpty},M.days.map((function(e,t){return console.log("day",e,t),o.a.createElement(b.a,{key:"day-".concat(t),value:e},e)})))),o.a.createElement("label",null,"Working Hours"),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"WorkingHours Start",required:!0,fullWidth:!0,type:"time",id:"licensee-workingHours-start",label:"WorkingHours Start",name:"licensee-workingHours-start",autoComplete:"licensee-workingHours-start",autoFocus:!0,error:""!==q.licensee.workingHoursStart,helperText:q.licensee.workingHoursStart,value:S.licensee.workingHoursStart,onChange:function(e){console.log("WorkingHours Start",e.target.value),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{workingHoursStart:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"WorkingHours End",required:!0,fullWidth:!0,type:"time",id:"licensee-workingHours-end",label:"WorkingHours End",name:"licensee-workingHours-end",autoComplete:"licensee-workingHours-end",autoFocus:!0,error:""!==q.licensee.workingHoursEnd,helperText:q.licensee.workingHoursEnd,value:S.licensee.workingHoursEnd,onChange:function(e){console.log("WorkingHours End",e.target.value),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{workingHoursEnd:e.target.value})}))}})),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-bsbNumber",label:"BSB Number",name:"licensee-bsbNumber",autoComplete:"licensee-bsbNumber",autoFocus:!0,error:""!==q.licensee.bsbNumber,helperText:q.licensee.bsbNumber,value:S.licensee.bsbNumber,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{bsbNumber:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"licensee-accountNumber",label:"Account Number",name:"licensee-accountNumber",autoComplete:"licensee-accountNumber",autoFocus:!0,error:""!==q.licensee.accountNumber,helperText:q.licensee.accountNumber,value:S.licensee.accountNumber,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{accountNumber:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"url",id:"licensee-url",label:"Website URL",name:"licensee-url",autoComplete:"licensee-url",autoFocus:!0,error:""!==q.licensee.url,helperText:q.licensee.url,value:S.licensee.url,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{url:e.target.value})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"licensee-taxId",label:"Tax ID",name:"licensee-taxId",autoComplete:"licensee-taxId",autoFocus:!0,error:""!==q.licensee.taxId,helperText:q.licensee.taxId,value:S.licensee.taxId,onChange:function(e){w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{taxId:e.target.value})}))}}),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Logo"),S.licensee.logoLink&&!S.licensee.logo&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:S.licensee.logoLink},"Logo")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"licensee-logo",multiple:!0,type:"file",name:"licensee-logo",onChange:function(e){console.log("licensee-logo",e.target.files),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{photo:e.target.files[0]})}))}})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Proof Of Incorporation"),S.licensee.proofOfIncorporationLink&&!S.licensee.proofOfIncorporation&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:S.licensee.proofOfIncorporationLink},"Proof Of Incorporation")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, image/pdf",id:"licensee-proofOfIncorporation",multiple:!0,type:"file",name:"licensee-proofOfIncorporation",onChange:function(e){console.log("licensee-proofOfIncorporation",e.target.files),w(Object(D.a)({},S,{licensee:Object(D.a)({},S.licensee,{proofOfIncorporation:e.target.files[0]})}))}}))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{component:"h5"},"Employee"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-name",label:"Name",name:"employee-name",autoComplete:"employee-name",autoFocus:!0,error:""!==q.employee.name,helperText:q.employee.name,value:S.employee.name,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{name:e.target.value})}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-email",label:"Email",name:"employee-email",autoComplete:"employee-email",autoFocus:!0,error:""!==q.employee.email,helperText:q.employee.email,value:S.employee.email,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{email:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:S.employee.isEmailVerified,name:"employee-isEmailVerified",onChange:function(e){console.log("onChange isEmailVerified",e),w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{isEmailVerified:!S.employee.isEmailVerified})}))}}),label:"Is Email Verified?"})),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-mobile",label:"Mobile",name:"employee-mobile",autoComplete:"employee-mobile",autoFocus:!0,error:""!==q.employee.mobile,helperText:q.employee.mobile,value:S.employee.mobile,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{mobile:e.target.value})}))}}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:S.employee.isMobileVerified,name:"employee-isMobileVerified",onChange:function(e){console.log("onChange isMobileVerified",e),w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{isMobileVerified:!S.employee.isMobileVerified})}))}}),label:"Is Mobile Verified?"})),o.a.createElement(V.a,{variant:"outlined",margin:"normal","aria-label":"Date of Birth",required:!0,fullWidth:!0,type:"date",id:"employee-dob",label:"Date Of Birth",name:"employee-dob",autoComplete:"employee-dob",autoFocus:!0,error:""!==q.employee.dob,helperText:q.employee.dob,value:S.employee.dob,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{dob:e.target.value})}))}}),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Address"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_text",label:"Address Line",name:"employee-address_text",autoComplete:"employee-address_text",autoFocus:!0,error:""!==q.employee.address.text,helperText:q.employee.address.text,value:S.employee.address.text,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{address:Object(D.a)({},S.employee.address,{text:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_pincode",label:"Pincode",name:"employee-address_pincode",autoComplete:"employee-address_pincode",autoFocus:!0,error:""!==q.employee.address.pincode,helperText:q.employee.address.pincode,value:S.employee.address.pincode,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{address:Object(D.a)({},S.employee.address,{pincode:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_coordinates",label:"Coordinates (Latitude,Longitude format)",name:"employee-address_coordinates",autoComplete:"employee-address_coordinates",autoFocus:!0,error:""!==q.employee.address.coordinates,helperText:q.employee.address.coordinates,value:S.employee.address.coordinates,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{address:Object(D.a)({},S.employee.address,{coordinates:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-address_city",label:"City",name:"employee-address_city",autoComplete:"employee-address_city",autoFocus:!0,error:""!==q.employee.address.city,helperText:q.employee.address.city,value:S.employee.address.city,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{address:Object(D.a)({},S.employee.address,{city:e.target.value})})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"employee-address_state-label"},"State"),o.a.createElement(ie.a,{labelId:"employee-address_state-label",id:"employee-address_state-Select",value:S.employee.address.state,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{address:Object(D.a)({},S.employee.address,{state:e.target.value})})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"employee-state-".concat(t),value:e},e)}))))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Driver License"),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"employee-driverLicense_card",label:"Driver License Number",name:"employee-driverLicense_card",autoComplete:"employee-driverLicense_card",autoFocus:!0,error:""!==q.employee.driverLicense.card,helperText:q.employee.driverLicense.card,value:S.employee.driverLicense.card,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{driverLicense:Object(D.a)({},S.employee.driverLicense,{card:e.target.value})})}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"month",id:"employee-driverLicense_expiry",label:"Expiry Date",name:"employee-driverLicense_expiry",autoComplete:"employee-driverLicense_expiry",autoFocus:!0,error:""!==q.employee.driverLicense.expiry,helperText:q.employee.driverLicense.expiry,value:S.employee.driverLicense.expiry,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{driverLicense:Object(D.a)({},S.employee.driverLicense,{expiry:e.target.value})})}))}}),M.states&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"employee-driverLicense_state-label"},"State"),o.a.createElement(ie.a,{labelId:"employee-driverLicense_state-label",id:"employee-driverLicense_state-Select",value:S.employee.driverLicense.state,onChange:function(e){w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{driverLicense:Object(D.a)({},S.employee.driverLicense,{state:e.target.value})})}))},className:t.selectEmpty},M.states.map((function(e,t){return console.log("state",e,t),o.a.createElement(b.a,{key:"driverLicense-state-".concat(t),value:e},e)})))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Scan ( Scan of Front and Back side of Driver License in a single File )"),S.employee.driverLicense.scanLink&&!S.employee.driverLicenseScan&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:S.employee.driverLicense.scanLink},"Scan")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, application/pdf",id:"employee-driverLicenseScan",type:"file",name:"employee-driverLicenseScan",onChange:function(e){console.log("employee-driverLicenseScan",e.target.files),w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{driverLicenseScan:e.target.files[0]})}))}}))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Photo"),S.employee.photoLink&&!S.employee.photo&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:S.employee.photoLink},"Photo")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"employee-photo",type:"file",name:"employee-photo",onChange:function(e){console.log("employee-photo",e.target.files),w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{photo:e.target.files[0]})}))}})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Additional Document"),S.employee.additionalDocumentLink&&!S.employee.additionalDocument&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement("a",{href:S.employee.additionalDocumentLink},"Additional Document")),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, application/pdf",id:"employee-additionalDocument",type:"file",name:"employee-additionalDocument",onChange:function(e){console.log("employee-additionalDocument",e.target.files),w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{additionalDocument:e.target.files[0]})}))}})),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:S.employee.isDeleted,name:"employee-isDeleted",onChange:function(e){console.log("onChange isDeleted",e),w(Object(D.a)({},S,{employee:Object(D.a)({},S.employee,{isDeleted:!S.employee.isDeleted})}))}}),label:"Delete Employee?"})),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return _.apply(this,arguments)}},"Save"))))}var yt="".concat("http://localhost:5000","/licensee/employee/invite"),vt=Object(j.a)((function(e){return{root:{width:"100%"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Et(e){var t=vt(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=localStorage.getItem("aclSettingsLicensee");r=JSON.parse(r),console.log("aclSettingsLicensee",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.e)();console.log("history",l);var d=Object(s.g)().licenseeId;console.log("licenseeId",d);var u=(i.state||{from:{pathname:"/"}}).from;a.acl.ADMINEMPLOYEE.includes("ADD")||l.replace(u);localStorage.getItem("token");var h=Object(n.useState)(""),f=Object(p.a)(h,2),b=f[0],g=f[1],y=Object(n.useState)({}),O=Object(p.a)(y,2),j=O[0],C=O[1],S=Object(n.useState)({}),w=Object(p.a)(S,2),I=w[0],T=w[1],k=Object(n.useState)(!1),N=Object(p.a)(k,2),x=(N[0],N[1],Object(n.useState)("")),A=Object(p.a)(x,2),R=A[0],P=A[1],F=Object(n.useState)(""),W=Object(p.a)(F,2),q=W[0],_=W[1];return console.log("aclSettingsLicensee",r),Object(n.useEffect)((function(){C(Object(D.a)({},r));var e=Object.keys(r),t={};e.forEach((function(e){t[e]=[]})),T(Object(D.a)({},t))}),[]),o.a.createElement(m.a,{component:"main",maxWidth:"xs"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Invite Employee"),""!==R&&o.a.createElement(v.a,{component:"h6",variant:"h5"},R),""!==q&&o.a.createElement(v.a,{component:"h6",variant:"h5"},q),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:b,onChange:function(e){g(e.target.value)}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Employee Privileges"),j&&Object.keys(j).map((function(e){return console.log("aclType",e,I),o.a.createElement(n.Fragment,{key:e},o.a.createElement(v.a,{variant:"subtitle2"},e.toUpperCase()),o.a.createElement(n.Fragment,null,I&&I[e]&&j[e]&&j[e].map((function(t,a){return console.log(e,"setting",t),o.a.createElement(se.a,{key:a,control:o.a.createElement(de.a,{checked:I[e].includes(t),name:t,onChange:function(a){console.log("onChange",a),function(e,t,a){console.log("handleACLChange",t,a),console.log("acList",I[e].length);var n=I[e].includes(t),o=[];if(console.log("isACPPresent",n),a&&!n&&((o=Object(D.a)({},I))[e]=[].concat(Object(L.a)(o[e]),[t]),T(o)),!a&&n){var r=I[e].filter((function(e){return e!==t}));(o=Object(D.a)({},I))[e]=r,T(o)}console.log("newAcl",o[e].length)}(e,t,a.target.checked)}}),label:t})}))))}))),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){e.preventDefault();var t={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({email:b,acl:I})};fetch(yt,t).then((function(e){return e.json()})).then((function(e){console.log(e),_(""),P("Successfully invited Employee"),l.push("/")})).catch((function(e){console.log("Employee Invite Error",e),_("Error occured while inviting Employee"),P("")}))}},"Invite Employee"))))}var Ot="".concat("http://localhost:5000","/licensee/employee/invite/accept"),jt=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),Ct=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");function St(e){console.log("EmployeeInviteAccept",e);var t=jt(),a=new URLSearchParams(Object(s.f)().search).get("token");console.log("Params",a);var r=Object(s.e)();console.log("history",r);var i=Object(n.useState)(""),l=Object(p.a)(i,2),d=l[0],u=l[1],h=Object(n.useState)(""),f=Object(p.a)(h,2),b=f[0],g=f[1],y=Object(n.useState)(""),O=Object(p.a)(y,2),j=O[0],C=O[1],S=Object(n.useState)(""),w=Object(p.a)(S,2),I=w[0],T=w[1],k=Object(n.useState)(!1),N=Object(p.a)(k,2),x=(N[0],N[1],Object(n.useState)("")),L=Object(p.a)(x,2),A=L[0],R=L[1],P=Object(n.useState)(""),F=Object(p.a)(P,2),W=F[0],q=F[1],_=Object(n.useState)({mobile:!1,name:!1,password:!1,repassword:!1}),M=Object(p.a)(_,2),H=M[0],Y=M[1],U=Object(n.useState)({mobile:"",name:"",password:"",repassword:""}),J=Object(p.a)(U,2),z=J[0],B=J[1];function Q(e,t){var a="Password should be 8 or more characters long. Password should contain one Uppercase Alphabetical Character, one Lowercase Alphabetical Character, one Numeric Character and one Special Character.",n=e===t,o=Ct.test(e),r=Ct.test(t);console.log("doPasswordsMatch",n,"isPasswordsValid",o,"isRePasswordValid",r);var i="";n||(i+="".concat("Passwords don't match"," ")),o||(i+="".concat(a," "));var l=Object(D.a)({},H),c=Object(D.a)({},z);n&&o?(l=Object(D.a)({},l,{password:!1}),Y(l),c=Object(D.a)({},c,{password:""}),B(c)):(l=Object(D.a)({},l,{password:!0}),Y(l),c=Object(D.a)({},c,{password:i}),B(c));var s="";n||(s+="".concat("Passwords don't match"," ")),r||(s+="".concat(a," ")),n&&o?(l=Object(D.a)({},l,{repassword:!1}),Y(l),c=Object(D.a)({},c,{repassword:""}),B(c)):(l=Object(D.a)({},l,{repassword:!0}),Y(l),c=Object(D.a)({},c,{repassword:s}),B(c))}function G(){return(G=Object(X.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(H.mobile||H.name||H.password)){e.next=4;break}return e.abrupt("return",!1);case 4:n={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({token:a,mobile:d,password:b,name:I})},console.log("requestOptions",n),fetch(Ot,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(Ot," Response"),e),q(""),R("Successfully saved Employee data"),u(""),T(""),g(""),C(""),setTimeout((function(){R(""),r.push("/")}),5e3)})).catch((function(e){console.log("".concat(Ot," Error"),e),q("Error occurred while saving Employee data")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Accept Employee Invite"),""!==A&&o.a.createElement(v.a,{component:"h6",variant:"h5"},A),""!==W&&o.a.createElement(v.a,{component:"h6",variant:"h5"},W),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"mobile",label:"Mobile",name:"mobile",autoComplete:"mobile",autoFocus:!0,error:H.mobile,helperText:z.mobile,value:d,onChange:function(e){u(e.target.value)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:H.name,helperText:z.name,value:I,onChange:function(e){T(e.target.value)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:b,error:H.password,helperText:z.password,onChange:function(e){g(e.target.value),Q(e.target.value,j)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repassword",label:"Confirm Password",type:"password",id:"repassword",autoComplete:"confirm-password",error:H.repassword,helperText:z.repassword,value:j,onChange:function(e){C(e.target.value),Q(b,e.target.value)}}),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return G.apply(this,arguments)}},"Accept"))))}var wt="".concat("http://localhost:5000","/admin/licensee/employees"),It="".concat("http://localhost:5000","/admin/employee/generateotp"),Tt="".concat("http://localhost:5000","/admin/employee/verifyotp"),kt="".concat("http://localhost:5000","/admin/employee/resendinvite"),Nt="".concat("http://localhost:5000","/admin/employee/forgotpassword"),xt=("".concat("http://localhost:5000","/admin/employee/resetpassword"),"".concat("http://localhost:5000","/admin/employee/delete")),Lt=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Dt(e){return console.log("TableActionButton",e),o.a.createElement("span",null,e.title)}var At=function(e){console.log("EmployeeList called");var t=Lt(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)().licenseeId;console.log("licenseeId",l);var d=(i.state||{from:{pathname:"/"}}).from;a.acl.LICENSEEEMPLOYEE.includes("VIEW")||r.replace(d);var u=Object(n.useState)([]),m=Object(p.a)(u,2),h=(m[0],m[1]),f=Object(n.useState)(0),b=Object(p.a)(f,2),g=(b[0],b[1]),y=Object(n.useState)(!1),v=Object(p.a)(y,2),O=v[0],j=v[1],C=Object(n.useState)(""),S=Object(p.a)(C,2),w=S[0],I=S[1],T=Object(n.useState)(""),k=Object(p.a)(T,2),N=k[0],x=k[1],A=Object(n.useState)(""),H=Object(p.a)(A,2),Y=H[0],U=H[1];function J(){j(!1)}var z=o.a.createRef();return o.a.createElement("div",{className:"t2y-list t2y-employeelist ".concat(t.root)},o.a.createElement(P.a,{open:O,onClose:J,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0},o.a.createElement(F.a,{id:"form-dialog-title"},"OTP Verification"),o.a.createElement(W.a,null,o.a.createElement(q.a,null,"Please Enter OTP"),""!==N&&o.a.createElement(q.a,null,N),o.a.createElement(V.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"name",label:"OTP",type:"otp",value:w,onChange:function(e){I(e.target.value)}})),o.a.createElement(_.a,null,o.a.createElement(E.a,{onClick:J,color:"primary"},"Cancel"),o.a.createElement(E.a,{onClick:function(){var e={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({mobile:Y,country:M.country,otp:w})};console.log("requestOptions",e),fetch(Tt,e).then((function(e){return e.json()})).then((function(e){console.log("".concat(Tt," Response"),e),z.current&&z.current.onQueryChange(),x("OTP Verified Successfully"),U(""),setTimeout((function(){J()}),5e3)})).catch((function(e){console.log("".concat(Tt," Error"),e)}))},color:"primary"},"Verify"))),o.a.createElement(R.a,{title:"Employees",tableRef:z,columns:[{title:"ID",field:"employeeRef",render:function(e){return e.employeeRef}},{title:"Name",field:"name",render:function(e){return e.name&&e.name?"".concat(e.name):e.name}},{title:"Email",field:"email",render:function(e){return e.email}},{title:"Email Verified",field:"isEmailVerified",render:function(e){return e.isEmailVerified?"Yes":"No"}},{title:"Mobile",field:"mobile",render:function(e){return e.mobile}},{title:"Mobile Verified",field:"isMobileVerified",render:function(e){return e.isMobileVerified?"Yes":"No"}},{title:"Is Owner",field:"isOwner",render:function(e){return e.isOwner?"Yes":"No"}},{title:"Driver License",field:"driverLicense",render:function(e){return o.a.createElement("div",null,e.driverLicense?o.a.createElement("div",null,e.driverLicense.card?o.a.createElement("div",null,o.a.createElement("b",null,"Card")," : ",e.driverLicense.card):o.a.createElement("div",null,o.a.createElement("b",null,"Card")," : Not Available"),e.driverLicense.expiry?o.a.createElement("div",null,o.a.createElement("b",null,"Expiry")," : ",e.driverLicense.expiry):o.a.createElement("div",null,o.a.createElement("b",null,"Expiry")," : Not Available"),e.driverLicense.state?o.a.createElement("div",null,o.a.createElement("b",null,"State")," : ",e.driverLicense.state):o.a.createElement("div",null,o.a.createElement("b",null,"State")," : Not Available"),e.driverLicense.scan?o.a.createElement("div",null,o.a.createElement("b",null,"Scan")," :",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.driverLicense.scan},"Download")):o.a.createElement("div",null,o.a.createElement("b",null,"Scan")," : Not Available")):o.a.createElement("div",null,"Data Not available"))}}],data:function(e){console.log("Employee MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(wt,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(wt," Response"),t);var n=t.employeeList||[],o=t.totalCount?t.totalCount:0,r=[];h((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),g(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("getEmployees Error",e),o(e)}))}))},actions:[{icon:function(){return o.a.createElement(Dt,{title:"Resend OTP"})},tooltip:"Resend OTP",onClick:function(e,t){console.log("Resend OTP onClick",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({employeeId:t._id,mobile:t.mobile,country:M.country})};console.log("requestOptions",a),fetch(It,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(It," Response"),e),z.current&&z.current.onQueryChange(),U(t.mobile),j(!0)})).catch((function(e){console.log("".concat(It," Error"),e)}))}},{icon:function(){return o.a.createElement(Dt,{title:"Verify Email"})},tooltip:"Verify Email",onClick:function(e,t){console.log("Verify Email",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({employeeId:t._id,email:t.email})};console.log("requestOptions",a),fetch(kt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(kt," Response"),e),z.current&&z.current.onQueryChange()})).catch((function(e){console.log("".concat(kt," Error"),e)}))}},{icon:function(){return o.a.createElement(Dt,{title:"Send Reset Password Link"})},tooltip:"Send Reset Password Link",onClick:function(e,t){console.log("Forgot Password",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({employeeId:t._id,email:t.email})};console.log("requestOptions",a),fetch(Nt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Nt," Response"),e),z.current&&z.current.onQueryChange()})).catch((function(e){console.log("".concat(Nt," Error"),e)}))}},{icon:function(){return o.a.createElement(Dt,{title:"Resend Invite"})},tooltip:"Resend Invite",onClick:function(e,t){if(t.acceptedInvite)console.log("Resend Invite",t.acceptedInvite);else{console.log("Resend Invite",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({employeeId:t._id,email:t.email})};console.log("requestOptions",a),fetch(kt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(kt," Response"),e),z.current&&z.current.onQueryChange()})).catch((function(e){console.log("".concat(kt," Error"),e)}))}}},{icon:"create",tooltip:"Edit Employee",onClick:function(e,t){console.log("Edit onClick",e,t),r.push("/licensee/".concat(l,"/employee/edit/").concat(t._id))}},{icon:"delete",tooltip:"Delete Employee",onClick:function(e,t){console.log("Delete Employee",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({employeeId:t._id})};console.log("requestOptions",a),fetch(xt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(xt," Response"),e),z.current&&z.current.onQueryChange()})).catch((function(e){console.log("".concat(xt," Error"),e)}))}},{icon:"add_circle",tooltip:"Invite Licensee Employee",isFreeAction:!0,onClick:function(e,t){console.log("Invite Licensee Employee onClick",e,t),r.push("/licensee/".concat(l,"/employee/invite"))}}],options:{actionsColumnIndex:-1}}))},Rt=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),Pt=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),Ft="".concat("http://localhost:5000","/licensee/employee/resetpassword");function Wt(e){console.log("EmployeeInviteAccept",e);var t=Rt(),a=new URLSearchParams(Object(s.f)().search).get("token");console.log("Params",a);var r=Object(n.useState)(""),i=Object(p.a)(r,2),l=i[0],d=i[1],u=Object(n.useState)(""),h=Object(p.a)(u,2),f=h[0],b=h[1],g=Object(n.useState)(!1),y=Object(p.a)(g,2),O=(y[0],y[1],Object(n.useState)("")),j=Object(p.a)(O,2),C=j[0],S=j[1],w=Object(n.useState)(""),I=Object(p.a)(w,2),T=I[0],k=I[1],N=Object(n.useState)({password:!1,repassword:!1}),x=Object(p.a)(N,2),L=x[0],A=x[1],R=Object(n.useState)({password:"",repassword:""}),P=Object(p.a)(R,2),F=P[0],W=P[1];function q(e,t){var a="Password should be 8 or more characters long. Password should contain one Uppercase Alphabetical Character, one Lowercase Alphabetical Character, one Numeric Character and one Special Character.",n=e===t,o=Pt.test(e),r=Pt.test(t);console.log("doPasswordsMatch",n,"isPasswordsValid",o,"isRePasswordValid",r);var i="";n||(i+="".concat("Passwords don't match"," ")),o||(i+="".concat(a," "));var l=Object(D.a)({},L),c=Object(D.a)({},F);n&&o?(l=Object(D.a)({},l,{password:!1}),A(l),c=Object(D.a)({},c,{password:""}),W(c)):(l=Object(D.a)({},l,{password:!0}),A(l),c=Object(D.a)({},c,{password:i}),W(c));var s="";n||(s+="".concat("Passwords don't match"," ")),r||(s+="".concat(a," ")),n&&o?(l=Object(D.a)({},l,{repassword:!1}),A(l),c=Object(D.a)({},c,{repassword:""}),W(c)):(l=Object(D.a)({},l,{repassword:!0}),A(l),c=Object(D.a)({},c,{repassword:s}),W(c))}function _(){return(_=Object(X.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!L.password){e.next=4;break}return e.abrupt("return",!1);case 4:n={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({token:a,password:l})},console.log("requestOptions",n),fetch(Ft,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(Ft," Response"),e),k(""),S("Successfully saved Password"),d(""),b(""),setTimeout((function(){S("")}),5e3)})).catch((function(e){console.log("".concat(Ft," Error"),e),k("Error occurred while saving Password")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},"Reset Password"),""!==C&&o.a.createElement(v.a,{component:"h6",variant:"h5"},C),""!==T&&o.a.createElement(v.a,{component:"h6",variant:"h5"},T),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l,error:L.password,helperText:F.password,onChange:function(e){d(e.target.value),q(e.target.value,f)}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repassword",label:"Confirm Password",type:"password",id:"repassword",autoComplete:"confirm-password",error:L.repassword,helperText:F.repassword,value:f,onChange:function(e){b(e.target.value),q(l,e.target.value)}}),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return _.apply(this,arguments)}},"Save Password"))))}var qt=a(497),Vt=a(506),_t=a(150),Mt=a(338),Ht=a(335),Yt=a(320),Ut=a(316),Jt=a(319),zt="".concat("http://localhost:5000","/admin/trailers"),Bt="".concat("http://localhost:5000","/admin/licensee/trailer"),Qt="".concat("http://localhost:5000","/admin/licensee/trailer"),Gt=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}}));function Zt(e){if(1===e)return"Additional Day";var t=Math.floor(e/36e5);if(t<24)return"".concat(t," Hours");var a=Math.floor(t/24);return"".concat(a," Days")}function $t(e){console.log("TrailerEdit",e);var t=Gt(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)(),d=l.licenseeId,u=l.trailerId;console.log("licenseeId",d,"trailerId",u);var h=(i.state||{from:{pathname:"/"}}).from;u||a.acl.TRAILER.includes("ADD")||r.replace(h),u&&!a.acl.TRAILER.includes("UPDATE")&&r.replace(h);var f=localStorage.getItem("rentalitemtypes");f=JSON.parse(f),console.log("rentalItemTypesList",f);f.filter((function(e){return"trailer"===e.itemtype}));var g={name:"",type:"",description:"",size:"",capacity:"",tare:"",features:[],rentalCharges:[],dlrCharges:0,isFeatured:!1,photosLinks:[],photos:null,adminRentalItemId:"",availability:!1,vin:"",age:0},y=Object(n.useState)(0),O=Object(p.a)(y,2),j=O[0],C=(O[1],Object(n.useState)([])),S=Object(p.a)(C,2),w=S[0],I=S[1],T=Object(n.useState)(g),k=Object(p.a)(T,2),N=k[0],x=k[1],A=Object(n.useState)(""),R=Object(p.a)(A,2),P=R[0],F=R[1],W=Object(n.useState)(""),q=Object(p.a)(W,2),_=q[0],M=q[1];Object(n.useEffect)((function(){var e={method:"GET",headers:c()};fetch("".concat(zt),e).then((function(e){return e.json()})).then((function(e){var t=e.trailersList,a=t[0];g.adminRentalItemId=a._id,I([].concat(Object(L.a)(w),Object(L.a)(t))),console.log("adminTrailers",t,"trailerStart.adminRentalItemId",g.adminRentalItemId),x(Object(D.a)({},N,{adminRentalItemId:a._id,name:a.name,type:a.type,description:a.description,size:a.size,capacity:a.capacity,tare:a.tare,features:a.features,rentalCharges:a.rentalCharges,dlrCharges:a.dlrCharges,isFeatured:a.isFeatured}))})).catch((function(e){console.log("Error occurred while fetching Trailer data",e)})),u&&fetch("".concat(Bt,"?id=").concat(u),e).then((function(e){return e.json()})).then((function(e){var t=e.trailerObj;x(Object(D.a)({},N,{name:t.name,type:t.type,description:t.description,size:t.size,capacity:t.capacity,tare:t.tare,features:t.features,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,photosLinks:t.photos,photos:null,adminRentalItemId:t.adminRentalItemId,availability:!!t.availability&&t.availability,vin:t.vin?t.vin:"",age:t.age?t.age:0}))})).catch((function(e){console.log("Error occurred while fetching Trailer data",e)}))}),[j]);var H=Object(n.useState)({name:!1,type:!1,description:!1,size:!1,capacity:!1,tare:!1,features:!1,rentalCharges:!1,dlrCharges:!1,isFeatured:!1,photos:!1,adminRentalItemId:!1,availability:!1,vin:!1,age:!1}),Y=Object(p.a)(H,2),U=Y[0],J=(Y[1],Object(n.useState)({name:"",type:"",description:"",size:"",capacity:"",tare:"",features:"",rentalCharges:"",dlrCharges:"",isFeatured:"",photos:"",adminRentalItemId:"",availability:"",vin:"",age:""})),z=Object(p.a)(J,2),B=z[0];z[1];function Q(){return(Q=Object(X.a)(K.a.mark((function e(t){var a,n,o,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(U.name||U.type||U.description||U.size||U.capacity||U.tare||U.features||U.rentalCharges||U.dlrCharges||U.isFeatured||U.photos||U.adminRentalItemId||U.availability||U.vin||U.age)){e.next=4;break}return e.abrupt("return",!1);case 4:if(a={method:"POST"},N.photos){if((n=new FormData).append("name",N.name),n.append("type",N.type),n.append("description",N.description),n.append("size",N.size),n.append("capacity",N.capacity),n.append("tare",N.capacity),n.append("features",N.features),n.append("adminRentalItemId",N.adminRentalItemId),n.append("availability",N.availability),n.append("vin",N.vin),n.append("age",N.age),n.append("licenseeId",d),N.photos&&N.photos.length>0)for(o=0;o<N.photos.length;o++)n.append("photos",N.photos[o],N.photos[o].name);u&&n.append("_id",u),console.log("formData",n),a.headers=Object(D.a)({},c()),a.body=n}else r={name:N.name,type:N.type,description:N.description,size:N.size,capacity:N.capacity,tare:N.tare,features:N.features,adminRentalItemId:N.adminRentalItemId,availability:N.availability,vin:N.vin,age:N.age,licenseeId:d},u&&(r._id=u),a.headers=Object(D.a)({},c(),{"Content-Type":"application/json"}),a.body=JSON.stringify(r);console.log("requestOptions",a),fetch(Qt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Qt," Response"),e);var t=e.trailerObj;x(Object(D.a)({},N,{name:t.name,type:t.type,description:t.description,size:t.size,capacity:t.capacity,tare:t.tare,features:t.features,adminRentalItemId:!!t.adminRentalItemId&&t.adminRentalItemId,availability:!!t.availability&&t.availability,vin:t.vin,age:t.age,photosLinks:t.photos})),M(""),F("Successfully saved Trailer data"),setTimeout((function(){F("")}),5e3)})).catch((function(e){console.log("".concat(Qt," Error"),e),M("Error occurred while saving Trailer data")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},u?"Edit Trailer":"Add Trailer"),""!==P&&o.a.createElement(v.a,{component:"h6",variant:"h5"},P),""!==_&&o.a.createElement(v.a,{component:"h6",variant:"h5"},_),o.a.createElement("form",{className:t.form,encType:"multipart/form-data",noValidate:!0},w&&N.adminRentalItemId&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(oe.a,{required:!0,fullWidth:!0,className:"SectionContainer"},o.a.createElement(re.a,{id:"adminRentalItemId-label"},"Select Trailer Type"),o.a.createElement(ie.a,{labelId:"adminRentalItemId-label",id:"adminRentalItemId-Select",value:N.adminRentalItemId,onChange:function(e){var t=w.find((function(t){return e.target.value===t._id}));x(Object(D.a)({},N,{adminRentalItemId:t._id,name:t.name,type:t.type,description:t.description,size:t.size,capacity:t.capacity,tare:t.tare,features:t.features,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,isFeatured:t.isFeatured}))},className:t.selectEmpty},w.map((function(e,t){return console.log("adminTrailer",e._id,e.name),o.a.createElement(b.a,{key:"type-".concat(e._id),value:e._id},e.name)}))))),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"vin",label:"VIN",name:"vin",autoComplete:"vin",autoFocus:!0,error:U.vin,helperText:B.vin,value:N.vin,onChange:function(e){x(Object(D.a)({},N,{vin:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"age",label:"Age",name:"age",autoComplete:"age",autoFocus:!0,error:U.age,helperText:B.age,value:N.age,onChange:function(e){x(Object(D.a)({},N,{age:parseInt(e.target.value)}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:U.name,helperText:B.name,value:N.name,onChange:function(e){x(Object(D.a)({},N,{name:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"type",label:"Type",name:"type",autoComplete:"type",autoFocus:!0,error:U.type,helperText:B.type,value:N.type,onChange:function(e){x(Object(D.a)({},N,{type:e.target.value}))}}),o.a.createElement(V.a,{"aria-label":"description",required:!0,fullWidth:!0,id:"description",label:"Description",name:"description",autoComplete:"description",autoFocus:!0,multiline:!0,error:U.description,helperText:B.description,value:N.description,onChange:function(e){x(Object(D.a)({},N,{description:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"size",label:"Size",name:"size",autoComplete:"size",autoFocus:!0,error:U.size,helperText:B.size,value:N.size,onChange:function(e){x(Object(D.a)({},N,{size:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"capacity",label:"Capacity",name:"capacity",autoComplete:"capacity",autoFocus:!0,error:U.capacity,helperText:B.capacity,value:N.capacity,onChange:function(e){x(Object(D.a)({},N,{capacity:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"tare",label:"Tare",name:"tare",autoComplete:"tare",autoFocus:!0,error:U.tare,helperText:B.tare,value:N.tare,onChange:function(e){x(Object(D.a)({},N,{tare:e.target.value}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(qt.a,{container:!0,spacing:0},o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle1"},"Features")),o.a.createElement(qt.a,{item:!0,sm:6,className:"TextAlignRight"},o.a.createElement(E.a,{type:"button",variant:"contained",color:"primary",className:t.submit,onClick:function(e){var t=Object(L.a)(N.features);t.push(""),x(Object(D.a)({},N,{features:t}))}},"Add"))),N.features.map((function(e,t){return o.a.createElement(V.a,{key:t,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Feature",name:"feature",autoComplete:"feature",autoFocus:!0,error:U.features,helperText:B.features,value:e,onChange:function(e){var a=Object(L.a)(N.features);a[t]=e.target.value,x(Object(D.a)({},N,{features:a}))}})}))),N.rentalCharges&&o.a.createElement(qt.a,{container:!0,spacing:0,className:"SectionContainer"},o.a.createElement(qt.a,{item:!0,sm:12},o.a.createElement(v.a,{variant:"subtitle1"},"Rental Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Pickup Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Door2Door Charges")),o.a.createElement(qt.a,{item:!0,sm:6},N.rentalCharges.pickUp&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,N.rentalCharges.pickUp.map((function(e,t){return o.a.createElement(Yt.a,{key:"pickup-".concat(t)},o.a.createElement(Ut.a,null,Zt(e.duration)),o.a.createElement(Ut.a,null,e.charges))})))))),o.a.createElement(qt.a,{item:!0,sm:6},N.rentalCharges&&N.rentalCharges.door2Door&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,N.rentalCharges.door2Door.map((function(e,t){return o.a.createElement(Yt.a,{key:"door2door-".concat(t)},o.a.createElement(Ut.a,null,Zt(e.duration)),o.a.createElement(Ut.a,null,e.charges))}))))))),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"dlrCharges",label:"Damage Liability Reduction Charges",name:"dlrCharges",autoComplete:"dlrCharges",autoFocus:!0,error:U.dlrCharges,helperText:B.dlrCharges,value:N.dlrCharges,onChange:function(e){x(Object(D.a)({},N,{dlrCharges:e.target.value}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:N.isFeatured,name:"isFeatured",onChange:function(e){console.log("onChange isFeatured",e),x(Object(D.a)({},N,{isFeatured:!N.isFeatured}))}}),label:"Is Featured Trailer Type?"}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:N.availability,name:"availability",onChange:function(e){console.log("onChange availability",typeof e.target.value,e.target.value),console.log("trailer.availability",typeof N.availability),x(Object(D.a)({},N,{availability:!N.availability}))}}),label:"Set as availability to be Rented?"})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Photos"),!N.photos&&o.a.createElement(ne.a,{className:"SectionContainer"},N.photosLinks.map((function(e,t){return o.a.createElement("div",{key:N._id+"_photo"+t},o.a.createElement("a",{href:e},"Photo ",t+1))}))),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"raised-button-file",multiple:!0,type:"file",name:"photos",onChange:function(e){console.log(e.target.files),x(Object(D.a)({},N,{photos:e.target.files}))}})),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return Q.apply(this,arguments)}},"Update"))))}var Kt="".concat("http://localhost:5000","/admin/licensee/trailers"),Xt="".concat("http://localhost:5000","/admin/licensee/trailer/availability"),ea=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ta(e){return console.log("TableActionButton",e),o.a.createElement("span",null,e.title)}var aa=function(e){var t=ea(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var n=Object(s.e)();console.log("history",n);var r=Object(s.f)();console.log("location",r);var i=Object(s.g)().licenseeId;console.log("licenseeId",i);var l=(r.state||{from:{pathname:"/"}}).from;a.acl.TRAILER.includes("VIEW")||n.replace(l);var d=o.a.useState([]),u=Object(p.a)(d,2),m=(u[0],u[1]),h=o.a.useState(0),f=Object(p.a)(h,2),b=(f[0],f[1]),g=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Trailer List",tableRef:g,search:!1,columns:[{title:"ID",field:"trailerRef",render:function(e){return e.trailerRef}},{title:"Name",field:"name",render:function(e){return e.name}},{title:"VIN",field:"vin",render:function(e){return e.vin}},{title:"Age",field:"age",render:function(e){return e.age}},{title:"Type",field:"type",render:function(e){return e.type}},{title:"Description",field:"description",render:function(e){return o.a.createElement("div",{style:{}},e.description)}},{title:"Size",field:"size",render:function(e){return e.size}},{title:"Capacity",field:"capacity",render:function(e){return e.capacity}},{title:"Tare",field:"tare",render:function(e){return e.tare}},{title:"Features",field:"features",render:function(e){return e.features}},{title:"Photos",field:"photos",render:function(e){return o.a.createElement("div",null,e.photos.map((function(t,a){return o.a.createElement("div",null,o.a.createElement("a",{key:e._id+"_photo"+a,href:t},"Photo ",a+1))})))}},{title:"Is Available?",field:"availability",render:function(e){return e.availability?"Yes":"No"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Kt,"?licenseeId=").concat(i,"&count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Kt," Response"),t);var n=t.trailersList||[],o=t.totalCount?t.totalCount:0,r=[];m((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),b(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(Kt," Error"),e),o(e)}))}))},actions:[function(e){return{icon:function(){return o.a.createElement(ta,{title:e.availability?"Set as Unavailable":"Set as Available"})},tooltip:e.availability?"Set as Unavailable":"Set as Available",onClick:function(e,t){console.log("Set as Unavailable",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({trailerId:t._id,availability:!t.availability})};console.log("requestOptions",a),fetch(Xt,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Xt," Response"),e),g.current&&g.current.onQueryChange()})).catch((function(e){console.log("".concat(Xt," Error"),e)}))}}},{icon:"create",tooltip:"Edit Trailer",onClick:function(e,t){console.log("Edit onClick",e,t),n.push("/licensee/".concat(i,"/trailer/edit/").concat(t._id))}},{icon:"add_circle",tooltip:"Add Trailer",isFreeAction:!0,onClick:function(e,t){console.log("Add onClick",e,t),n.push("/licensee/".concat(i,"/trailer/add"))}}],options:{actionsColumnIndex:-1,rowStyle:{height:"100px",maxHeight:"100px",overflow:"scroll"}}}))},na="".concat("http://localhost:5000","/admin/upsellitems"),oa="".concat("http://localhost:5000","/admin/licensee/trailers"),ra="".concat("http://localhost:5000","/admin/licensee/upsellitem"),ia="".concat("http://localhost:5000","/admin/licensee/upsellitem"),la=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}}));function ca(e){if(1===e)return"Additional Day";var t=Math.floor(e/36e5);if(t<24)return"".concat(t," Hours");var a=Math.floor(t/24);return"".concat(a," Days")}function sa(e){console.log("UpsellEdit",e);var t=la(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)(),d=l.licenseeId,u=l.upsellItemId;console.log("upsellItemId",u);var h=(i.state||{from:{pathname:"/"}}).from;u||a.acl.UPSELL.includes("ADD")||r.replace(h),u&&!a.acl.UPSELL.includes("UPDATE")&&r.replace(h);var f=localStorage.getItem("rentalitemtypes");f=JSON.parse(f),console.log("rentalItemTypesList",f);f.filter((function(e){return"upsellitem"===e.itemtype}));var g={name:"",type:"",description:"",rentalCharges:{},dlrCharges:0,isFeatured:!1,photosLinks:[],photos:null,trailerId:"",adminRentalItemId:"",availability:!1,quantity:""},y=Object(n.useState)(0),O=Object(p.a)(y,2),j=O[0],C=(O[1],Object(n.useState)([])),S=Object(p.a)(C,2),w=S[0],I=S[1],T=Object(n.useState)([]),k=Object(p.a)(T,2),N=k[0],x=k[1],A=Object(n.useState)(g),R=Object(p.a)(A,2),P=R[0],F=R[1],W=Object(n.useState)(""),q=Object(p.a)(W,2),_=q[0],M=q[1],H=Object(n.useState)(""),Y=Object(p.a)(H,2),U=Y[0],J=Y[1];Object(n.useEffect)((function(){var e={method:"GET",headers:c()};fetch("".concat(na),e).then((function(e){return e.json()})).then((function(e){var t=e.upsellItemsList,a=t[0];g.adminRentalItemId=a._id,x([].concat(Object(L.a)(N),Object(L.a)(t))),console.log("adminUpsellItems",t,"upsellItemStart.adminRentalItemId",g.adminRentalItemId),F(Object(D.a)({},P,{adminRentalItemId:a._id,name:a.name,type:a.type,description:a.description,rentalCharges:a.rentalCharges,dlrCharges:a.dlrCharges,isFeatured:a.isFeatured}))})).catch((function(e){console.log("Error occurred while fetching Trailer data",e)})),fetch("".concat(oa,"?licenseeId=").concat(d,"&count=0&skip=100"),e).then((function(e){return e.json()})).then((function(e){console.log("".concat(oa," Response"),e);var t=e.trailersList||[];I([].concat(Object(L.a)(w),Object(L.a)(t)))})).catch((function(e){console.log("".concat(oa," Error"),e)})),u&&fetch("".concat(ra,"?id=").concat(u),e).then((function(e){return e.json()})).then((function(e){var t=e.upsellItemObj;F(Object(D.a)({},P,{name:t.name,type:t.type,description:t.description,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,isFeatured:!!t.isFeatured&&t.isFeatured,availability:!!t.availability&&t.availability,photosLinks:t.photos}))})).catch((function(e){console.log("Error occurred while fetching Upsell Item data",e)}))}),[j]);var z=Object(n.useState)({name:!1,type:!1,description:!1,rentalCharges:!1,dlrCharges:!1,isFeatured:!1,photos:!1,trailerId:!1,adminRentalItemId:!1,availability:!1,quantity:!1}),B=Object(p.a)(z,2),Q=B[0],G=(B[1],Object(n.useState)({name:"",type:"",description:"",rentalCharges:"",dlrCharges:"",isFeatured:"",photos:"",trailerId:"",adminRentalItemId:"",availability:"",quantity:""})),Z=Object(p.a)(G,2),$=Z[0];Z[1];function ee(){return(ee=Object(X.a)(K.a.mark((function e(t){var a,n,o,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(Q.name||Q.type||Q.description||Q.rentalCharges||Q.dlrCharges||Q.isFeatured||Q.photos||Q.trailerId||Q.adminRentalItemId||Q.availability||Q.quantity)){e.next=4;break}return e.abrupt("return",!1);case 4:if(a={method:"POST"},P.rates||P.photos){if((n=new FormData).append("name",P.name),n.append("type",P.type),n.append("description",P.description),n.append("adminRentalItemId",P.adminRentalItemId),n.append("trailerId",P.trailerId),n.append("availability",P.availability),n.append("quantity",P.quantity),P.photos&&P.photos.length>0)for(o=0;o<P.photos.length;o++)n.append("photos",P.photos[o],P.photos[o].name);n.append("licenseeId",d),u&&n.append("_id",u),console.log("formData",n),a.headers=Object(D.a)({},c()),a.body=n}else r={name:P.name,type:P.type,description:P.description,adminRentalItemId:P.adminRentalItemId,trailerId:P.trailerId,availability:P.availability,quantity:P.quantity,licenseeId:d},u&&(r._id=u),a.headers=Object(D.a)({},c(),{"Content-Type":"application/json"}),a.body=JSON.stringify(r);console.log("requestOptions",a),fetch(ia,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(ia," Response"),e);var t=e.upsellItemObj;F(Object(D.a)({},P,{name:t.name,type:t.type,description:t.description,photosLinks:t.photos,photos:null,adminRentalItemId:t.adminRentalItemId,trailerId:t.trailerId?t.trailerId:"",availability:!!t.availability&&t.availability,quantity:t.quantity})),J(""),M("Successfully saved Upsell Item data"),setTimeout((function(){M("")}),5e3)})).catch((function(e){console.log("".concat(ia," Error"),e),J("Error occurred while saving Upsell Item data")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},u?"Edit Upsell Item":"Add Upsell Item"),""!==_&&o.a.createElement(v.a,{component:"h6",variant:"h5"},_),""!==U&&o.a.createElement(v.a,{component:"h6",variant:"h5"},U),o.a.createElement("form",{className:t.form,encType:"multipart/form-data",noValidate:!0},N&&P.adminRentalItemId&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(oe.a,{required:!0,fullWidth:!0,className:"SectionContainer"},o.a.createElement(re.a,{id:"adminRentalItemId-label"},"Select Upsell Item Type"),o.a.createElement(ie.a,{labelId:"adminRentalItemId-label",id:"adminRentalItemId-Select",value:P.adminRentalItemId,onChange:function(e){var t=N.find((function(t){return e.target.value===t._id}));F(Object(D.a)({},P,{adminRentalItemId:t._id,name:t.name,type:t.type,description:t.description,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,isFeatured:t.isFeatured}))},className:t.selectEmpty},N.map((function(e,t){return console.log("adminUpsellItem",e._id,e.name),o.a.createElement(b.a,{key:"type-".concat(e._id),value:e._id},e.name)}))))),w&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(oe.a,{required:!0,fullWidth:!0,className:"SectionContainer"},o.a.createElement(re.a,{id:"trailerId-label"},"Select TrailerId"),o.a.createElement(ie.a,{labelId:"trailerId-label",id:"trailerId-Select",value:P.trailerId,onChange:function(e){F(Object(D.a)({},P,{trailerId:e.target.value}))},className:t.selectEmpty},w.map((function(e,t){return console.log("trailer",e._id,e.name),o.a.createElement(b.a,{key:"type-".concat(e._id),value:e._id},"".concat(e.name," (").concat(e.vin,")"))}))))),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"quantity",label:"quantity",name:"quantity",autoComplete:"quantity",autoFocus:!0,error:Q.quantity,helperText:$.quantity,value:P.quantity,onChange:function(e){F(Object(D.a)({},P,{quantity:parseInt(e.target.value)}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:Q.name,helperText:$.name,value:P.name,onChange:function(e){F(Object(D.a)({},P,{name:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"type",label:"Type",name:"type",autoComplete:"type",autoFocus:!0,error:Q.type,helperText:$.type,value:P.type,onChange:function(e){F(Object(D.a)({},P,{type:e.target.value}))}}),o.a.createElement(V.a,{"aria-label":"description",required:!0,fullWidth:!0,id:"description",label:"Description",name:"description",autoComplete:"description",autoFocus:!0,multiline:!0,error:Q.description,helperText:$.description,value:P.description,onChange:function(e){F(Object(D.a)({},P,{description:e.target.value}))}}),P.rentalCharges&&o.a.createElement(qt.a,{container:!0,spacing:0,className:"SectionContainer"},o.a.createElement(qt.a,{item:!0,sm:12},o.a.createElement(v.a,{variant:"subtitle1"},"Rental Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Pickup Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Door2Door Charges")),o.a.createElement(qt.a,{item:!0,sm:6},P.rentalCharges.pickUp&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,P.rentalCharges.pickUp.map((function(e,t){return o.a.createElement(Yt.a,{key:"pickup-".concat(t)},o.a.createElement(Ut.a,null,ca(e.duration)),o.a.createElement(Ut.a,null,e.charges))})))))),o.a.createElement(qt.a,{item:!0,sm:6},P.rentalCharges&&P.rentalCharges.door2Door&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,P.rentalCharges.door2Door.map((function(e,t){return o.a.createElement(Yt.a,{key:"door2door-".concat(t)},o.a.createElement(Ut.a,null,ca(e.duration)),o.a.createElement(Ut.a,null,e.charges))}))))))),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,disabled:!0,id:"dlrCharges",label:"Damage Liability Reduction Charges",name:"dlrCharges",autoComplete:"dlrCharges",autoFocus:!0,error:Q.dlrCharges,helperText:$.dlrCharges,value:P.dlrCharges,onChange:function(e){F(Object(D.a)({},P,{dlrCharges:e.target.value}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(se.a,{control:o.a.createElement(de.a,{disabled:!0,checked:P.isFeatured,name:"isFeatured",onChange:function(e){console.log("onChange isFeatured",e),F(Object(D.a)({},P,{isFeatured:!P.isFeatured}))}}),label:"Is Featured Upsell Item Type?"}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:P.availability,name:"availability",onChange:function(e){console.log("onChange availability",typeof e.target.value,e.target.value),console.log("upsellItem.availability",typeof P.availability),F(Object(D.a)({},P,{availability:!P.availability}))}}),label:"Set as availability to be Rented?"})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Photos"),!P.photos&&o.a.createElement(ne.a,{className:"SectionContainer"},P.photosLinks.map((function(e,t){return o.a.createElement("div",{key:P._id+"_photo"+t},o.a.createElement("a",{href:e},"Photo ",t+1))}))),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, application/pdf",id:"raised-button-file",multiple:!0,type:"file",name:"photos",onChange:function(e){console.log(e.target.files),F(Object(D.a)({},P,{photos:e.target.files}))}})),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return ee.apply(this,arguments)}},"Update"))))}var da=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),ua="".concat("http://localhost:5000","/admin/licensee/upsellitems"),ma="".concat("http://localhost:5000","/admin/licensee/upsellitem/availability");function pa(e){return console.log("TableActionButton",e),o.a.createElement("span",null,e.title)}function ha(e){var t=da(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var n=Object(s.e)();console.log("history",n);var r=Object(s.f)();console.log("location",r);var i=Object(s.g)().licenseeId;console.log("licenseeId",i);var l=(r.state||{from:{pathname:"/"}}).from;a.acl.UPSELL.includes("VIEW")||n.replace(l);var d=o.a.useState([]),u=Object(p.a)(d,2),m=(u[0],u[1]),h=o.a.useState(0),f=Object(p.a)(h,2),b=(f[0],f[1]),g=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Upsell Items List",tableRef:g,search:!1,columns:[{title:"ID",field:"upsellItemRef",render:function(e){return e.upsellItemRef}},{title:"Name",field:"name",render:function(e){return e.name}},{title:"Type",field:"type",render:function(e){return e.type}},{title:"Description",field:"description",render:function(e){return e.description}},{title:"Photos",field:"photos",render:function(e){return o.a.createElement("div",null,e.photos.map((function(t,a){return o.a.createElement("div",null,o.a.createElement("a",{key:e._id+"_photo"+a,href:t},"Photo ",a+1))})))}},{title:"Quantity",field:"quantity",render:function(e){return e.quantity}},{title:"Is Available?",field:"availability",render:function(e){return e.availability?"true":"false"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(ua,"?licenseeId=").concat(i,"&count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(ua," Response"),t);var n=t.upsellItemsList||[],o=t.totalCount?t.totalCount:0,r=[];m((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),b(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(ua," Error"),e),o(e)}))}))},actions:[function(e){return{icon:function(){return o.a.createElement(pa,{title:e.availability?"Set as Unavailable":"Set as Available"})},tooltip:e.availability?"Set as Unavailable":"Set as Available",onClick:function(e,t){console.log("Set as Unavailable",e,t);var a={method:"POST",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({upsellItemId:t._id,availability:!t.availability})};console.log("requestOptions",a),fetch(ma,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(ma," Response"),e),g.current&&g.current.onQueryChange()})).catch((function(e){console.log("".concat(ma," Error"),e)}))}}},{icon:"create",tooltip:"Edit Upsell Item",onClick:function(e,t){console.log("Edit onClick",e,t),n.push("/licensee/".concat(i,"/upsellitem/edit/").concat(t._id))}},{icon:"add_circle",tooltip:"Add Upsell Item",isFreeAction:!0,onClick:function(e,t){console.log("Add onClick",e,t),n.push("/licensee/".concat(i,"/upsellitem/add"))}}],options:{actionsColumnIndex:-1}}))}a(464),a(465);var fa="".concat("http://localhost:5000","/admin/licensee/insurance"),ba="".concat("http://localhost:5000","/admin/licensee/verify/insurance"),ga=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var ya=function(e){var t=ga(),a=o.a.useState([]),n=Object(p.a)(a,2),r=(n[0],n[1]),i=o.a.useState(0),l=Object(p.a)(i,2),s=(l[0],l[1]),d=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Trailer Insurance",tableRef:d,columns:[{title:"Licensee Name",field:"licenseeName",render:function(e){return console.log("rowData",e),e.licenseeName}},{title:"Trailer Name",field:"itemName",render:function(e){return e.itemName}},{title:"Insurance Document",field:"insuranceDocument",render:function(e){return o.a.createElement("div",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.document},"Download"))}},{title:"Insurance Document Verified",field:"insuranceDocumentVerified",type:"boolean",render:function(e){return e.verified?"Yes":"No"}},{title:"Insurance Document Accepted",field:"insuranceDocumentAccepted",render:function(e){return e.accepted?"Yes":"No"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(fa,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(fa," Response"),t);var n=t.insuranceList||[],o=t.totalCount||0,i=[];r((function(e){return console.log(typeof e,typeof n),i=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",i),i})),s(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(fa," Error"),e),o(e)}))}))},actions:[{icon:"check_circle",tooltip:"Approve",onClick:function(e,t){console.log("Approve onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({insuranceId:t._id,isAccepted:!0})};console.log("requestOptions",a),fetch(ba,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(ba," Response"),e),d.current&&d.current.onQueryChange()})).catch((function(e){console.log("".concat(ba," Error"),e)}))}},{icon:"cancel",tooltip:"Reject",onClick:function(e,t){console.log("Reject onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({insuranceId:t._id,isAccepted:!1})};console.log("requestOptions",a),fetch(ba,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(ba," Response"),e),d.current&&d.current.onQueryChange()})).catch((function(e){console.log("".concat(ba," Error"),e)}))}}],options:{actionsColumnIndex:-1}}))},va="".concat("http://localhost:5000","/admin/licensee/servicing"),Ea="".concat("http://localhost:5000","/admin/licensee/verify/servicing"),Oa=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var ja=function(e){var t=Oa(),a=o.a.useState([]),n=Object(p.a)(a,2),r=(n[0],n[1]),i=o.a.useState(0),l=Object(p.a)(i,2),s=(l[0],l[1]),d=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Trailer Servicing",tableRef:d,columns:[{title:"Licensee Name",field:"licenseeName",render:function(e){return console.log("rowData",e),e.licenseeName}},{title:"Trailer Name",field:"itemName",render:function(e){return e.itemName}},{title:"Servicing Document",field:"servicingDocument",render:function(e){return o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.document},"Download")}},{title:"Servicing Document Verified",field:"servicingDocumentVerified",type:"boolean",render:function(e){return e.verified?"Yes":"No"}},{title:"Servicing Document Accepted",field:"servicingDocumentAccepted",render:function(e){return e.accepted?"Yes":"No"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(va,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(va," Response"),t);var n=t.servicingList||[],o=t.totalCount||0,i=[];r((function(e){return console.log(typeof e,typeof n),i=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",i),i})),s(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(va," Error"),e),o(e)}))}))},actions:[{icon:"check_circle",tooltip:"Approve",onClick:function(e,t){console.log("Approve onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({servicingId:t._id,isAccepted:!0})};console.log("requestOptions",a),fetch(Ea,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Ea," Response"),e),d.current&&d.current.onQueryChange()})).catch((function(e){console.log("".concat(Ea," Error"),e)}))}},{icon:"cancel",tooltip:"Reject",onClick:function(e,t){console.log("Reject onClick",e,t);var a={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify({servicingId:t._id,isAccepted:!1})};console.log("requestOptions",a),fetch(Ea,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Ea," Response"),e),d.current&&d.current.onQueryChange()})).catch((function(e){console.log("".concat(Ea," Error"),e)}))}}],options:{actionsColumnIndex:-1}}))},Ca="".concat("http://localhost:5000","/admin/customer/payments"),Sa=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var wa=function(e){var t=Sa(),a=o.a.useState([]),n=Object(p.a)(a,2),r=(n[0],n[1]),i=o.a.useState(0),l=Object(p.a)(i,2),s=(l[0],l[1]),d=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Payments - Inward (From Customers to T2Y)",tableRef:d,columns:[{title:"Customer Name",field:"customerName",render:function(e){return e.customerName}},{title:"Licensee Name",field:"licenseeName",render:function(e){return e.licenseeName}},{title:"Total Paid",field:"totalPaid",render:function(e){return e.totalPaid?e.totalPaid:0}},{title:"Authorization Transaction ID",field:"transactionIdAuth",render:function(e){return e.transactionIdAuth?e.transactionIdAuth:""}},{title:"Authorization Transaction Date",field:"transactionAuthDate",render:function(e){return e.transactionAuthDate?e.transactionAuthDate:""}},{title:"Transaction Auth Action",field:"authTransactionAction",render:function(e){return e.authTransactionAction?e.authTransactionAction:""}},{title:"Action Transaction ID",field:"transactionIdAction",render:function(e){return e.transactionIdAction?e.transactionIdAction:""}},{title:"Action Transaction Date",field:"transactionActionDate",render:function(e){return e.transactionActionDate?e.transactionActionDate:""}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Ca,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Ca," Response"),t);var n=t.customerPaymentsList||[],o=t.totalCount||0,i=[];r((function(e){return console.log(typeof e,typeof n),i=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",i),i})),s(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(Ca," Error"),e),o(e)}))}))}}))},Ia="".concat("http://localhost:5000","/admin/licensee/payouts"),Ta=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var ka=function(e){var t=Ta(),a=o.a.useState([]),n=Object(p.a)(a,2),r=(n[0],n[1]),i=o.a.useState(0),l=Object(p.a)(i,2),s=(l[0],l[1]),d=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Payments - Outward (From T2Y to Licensee)",tableRef:d,columns:[{title:"Licensee Name",field:"licenseeName",render:function(e){return e.licenseeName}},{title:"Total Paid",field:"totalAmount",render:function(e){return e.totalAmount?e.totalAmount:0}},{title:"Stripe Account ID",field:"stripeAccountId",render:function(e){return e.stripeAccountId?e.stripeAccountId:""}},{title:"Stripe Payout Status",field:"stripePayoutStatus",render:function(e){return e.stripePayoutStatus?e.stripePayoutStatus:""}},{title:"Transaction Auth Action",field:"authTransactionAction",render:function(e){return e.authTransactionAction?e.authTransactionAction:""}},{title:"Payment At",field:"createdAt",render:function(e){return e.createdAt?e.createdAt:""}},{title:"Updated At",field:"updatedAt",render:function(e){return e.updatedAt?e.updatedAt:""}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Ia,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Ia," Response"),t);var n=t.licenseePayoutsList||[],o=t.totalCount||0,i=[];r((function(e){return console.log(typeof e,typeof n),i=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",i),i})),s(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(Ia," Error"),e),o(e)}))}))}}))},Na=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}})),xa=("".concat("http://localhost:5000","/admin/rentalitemtype"),"".concat("http://localhost:5000","/admin/rentalitemtype"));function La(e){console.log("rentalItemTypeEdit",e);var t=Na(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)().rentalItemId;console.log("rentalItemId",l);var d=(i.state||{from:{pathname:"/"}}).from;l||a.acl.TRAILER.includes("ADD")||r.replace(d),l&&!a.acl.TRAILER.includes("UPDATE")&&r.replace(d);var u=Object(n.useState)(0),h=Object(p.a)(u,2),f=(h[0],h[1],Object(n.useState)({name:"",code:"",itemType:""})),g=Object(p.a)(f,2),y=g[0],O=g[1],j=Object(n.useState)(""),C=Object(p.a)(j,2),S=C[0],w=C[1],I=Object(n.useState)(""),T=Object(p.a)(I,2),k=T[0],N=T[1],x=localStorage.getItem("rentalitemtypes");x=JSON.parse(x),console.log("rentalItemTypesList",x),l&&x.forEach((function(e){e._id===l&&O(Object(D.a)({},y,{name:e.name,code:e.code,itemType:e.itemtype}))}));var L=Object(n.useState)({name:!1,code:!1,itemType:!1}),A=Object(p.a)(L,2),R=A[0],P=(A[1],Object(n.useState)({name:"",code:"",itemType:""})),F=Object(p.a)(P,2),W=F[0];F[1];function q(){return(q=Object(X.a)(K.a.mark((function e(t){var a,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(R.name||R.code||R.itemType)){e.next=4;break}return e.abrupt("return",!1);case 4:a={method:"POST"},n={name:y.name,code:y.code,itemtype:y.itemType},l&&(n._id=l),a.headers=Object(D.a)({},c(),{"Content-Type":"application/json"}),a.body=JSON.stringify(n),console.log("requestOptions",a),fetch(xa,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(xa," Response"),e),N(""),w("Successfully saved rentalItemType data"),setTimeout((function(){w("")}),5e3)})).catch((function(e){console.log("".concat(xa," Error"),e),N("Error occurred while saving Rental Item Type data")}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},l?"Edit Rental Item Type":"Add Rental Item Type"),""!==S&&o.a.createElement(v.a,{component:"h6",variant:"h5"},S),""!==k&&o.a.createElement(v.a,{component:"h6",variant:"h5"},k),o.a.createElement("form",{className:t.form,encType:"multipart/form-data",noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:R.name,helperText:W.name,value:y.name,onChange:function(e){O(Object(D.a)({},y,{name:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"code",label:"Code",name:"code",autoComplete:"code",autoFocus:!0,disabled:!0,error:R.code,helperText:W.code,value:y.code,onChange:function(e){O(Object(D.a)({},y,{code:e.target.value}))}}),l&&o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"itemType",label:"Item Type",name:"itemType",autoComplete:"itemType",autoFocus:!0,disabled:!0,error:R.itemType,helperText:W.itemType,value:y.itemType,onChange:function(e){O(Object(D.a)({},y,{itemType:e.target.value}))}}),!l&&o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"itemType-label"},"Item Type"),o.a.createElement(ie.a,{labelId:"itemType-label",id:"itemTypeSelect",value:y.itemType,onChange:function(e){O(Object(D.a)({},y,{itemType:e.target.value}))},className:t.selectEmpty},o.a.createElement(b.a,{value:"trailer"},"Trailer"),o.a.createElement(b.a,{value:"upsellitem"},"Uspell Item")),o.a.createElement(le.a,null,"Required")),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return q.apply(this,arguments)}},"Update"))))}var Da=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),Aa="".concat("http://localhost:5000","/admin/rentalitemtypes");function Ra(e){var t=Da(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=(i.state||{from:{pathname:"/"}}).from;a.acl.TRAILER.includes("VIEW")||r.replace(l);var d=Object(n.useState)([]),u=Object(p.a)(d,2),m=u[0],h=u[1],f=Object(n.useState)(0),b=Object(p.a)(f,2),g=(b[0],b[1]);Object(n.useEffect)((function(){var e={method:"GET",headers:c()};fetch("".concat(Aa),e).then((function(e){return e.json()})).then((function(e){console.log("".concat(Aa," Response"),e);var t=e.rentalItemTypes||[],a=t.length;h(t),g(a),localStorage.setItem("rentalitemtypes",JSON.stringify(t))})).catch((function(e){console.log("".concat(Aa," Error"),e)}))}),0);var y=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Rental Item Types List",tableRef:y,search:!1,columns:[{title:"ID",field:"rentalItemTypeRef",render:function(e){return e.rentalItemTypeRef}},{title:"Name",field:"name",render:function(e){return e.name}},{title:"Code",field:"code",render:function(e){return e.code}},{title:"Item Type",field:"itemtype",render:function(e){return e.itemtype}}],data:m,actions:[{icon:"create",tooltip:"Edit Rental Item",onClick:function(e,t){console.log("Edit onClick",e,t),r.push("/rentalitemtype/edit/".concat(t._id))}},{icon:"add_circle",tooltip:"Add  Rental Item",isFreeAction:!0,onClick:function(e,t){console.log("Add onClick",e,t),r.push("/rentalitemtype/add")}}],options:{actionsColumnIndex:-1}}))}var Pa="".concat("http://localhost:5000","/admin/trailer"),Fa="".concat("http://localhost:5000","/admin/trailer"),Wa=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}}));function qa(e){if(1===e)return"Additional Day";var t=Math.floor(e/36e5);if(t<24)return"".concat(t," Hours");var a=Math.floor(t/24);return"".concat(a," Days")}function Va(e){console.log("TrailerEdit",e);var t=Wa(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)().trailerId;console.log("trailerId",l);var d=(i.state||{from:{pathname:"/"}}).from;l||a.acl.TRAILER.includes("ADD")||r.replace(d),l&&!a.acl.TRAILER.includes("UPDATE")&&r.replace(d);var u=localStorage.getItem("rentalitemtypes");u=JSON.parse(u),console.log("rentalItemTypesList",u);var h=u.filter((function(e){return"trailer"===e.itemtype})),f=Object(n.useState)(0),g=Object(p.a)(f,2),y=g[0],O=(g[1],Object(n.useState)({name:"",type:"",description:"",size:"",capacity:"",tare:"",features:[],rentalCharges:[],dlrCharges:0,file:null,isFeatured:!1,availability:!1,photosLinks:[],photos:null})),j=Object(p.a)(O,2),C=j[0],S=j[1],w=Object(n.useState)(""),I=Object(p.a)(w,2),T=I[0],k=I[1],N=Object(n.useState)(""),x=Object(p.a)(N,2),A=x[0],R=x[1];Object(n.useEffect)((function(){var e={method:"GET",headers:c()};fetch("".concat(Pa,"?id=").concat(l),e).then((function(e){return e.json()})).then((function(e){var t=e.trailerObj;S(Object(D.a)({},C,{name:t.name,type:t.type,description:t.description,size:t.size,capacity:t.capacity,tare:t.tare,features:t.features,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,isFeatured:!!t.isFeatured&&t.isFeatured,availability:!!t.availability&&t.availability,photosLinks:t.photos,photos:null,rates:null}))})).catch((function(e){console.log("Error occurred while fetching Trailer data",e)}))}),[y]);var P=Object(n.useState)({name:!1,type:!1,description:!1,size:!1,capacity:!1,tare:!1,features:!1,rentalCharges:!1,dlrCharges:!1,isFeatured:!1,availability:!1,photos:!1}),F=Object(p.a)(P,2),W=F[0],q=(F[1],Object(n.useState)({name:"",type:"",description:"",size:"",capacity:"",tare:"",features:"",rentalCharges:"",dlrCharges:"",isFeatured:"",availability:"",photos:""})),_=Object(p.a)(q,2),M=_[0];_[1];function H(){return(H=Object(X.a)(K.a.mark((function e(t){var a,n,o,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(W.name||W.type||W.description||W.size||W.capacity||W.tare||W.features||W.rentalCharges||W.dlrCharges||W.isFeatured||W.availability||W.photos)){e.next=4;break}return e.abrupt("return",!1);case 4:if(a={method:"POST"},C.rates||C.photos){if((n=new FormData).append("name",C.name),n.append("type",C.type),n.append("description",C.description),n.append("size",C.size),n.append("capacity",C.capacity),n.append("tare",C.capacity),n.append("features",C.features),n.append("dlrCharges",C.dlrCharges),n.append("availability",C.availability),n.append("isFeatured",C.isFeatured),C.rates?n.append("rates",C.rates,C.rates.name):C.rentalCharges&&n.append("rentalCharges",C.rentalCharges),C.photos&&C.photos.length>0)for(o=0;o<C.photos.length;o++)n.append("photos",C.photos[o],C.photos[o].name);l&&n.append("_id",l),console.log("formData",n),a.headers=Object(D.a)({},c()),a.body=n}else r={name:C.name,type:C.type,description:C.description,size:C.size,capacity:C.capacity,tare:C.tare,features:C.features,rentalCharges:C.rentalCharges,dlrCharges:C.dlrCharges,availability:C.availability,isFeatured:C.isFeatured},l&&(r._id=l),a.headers=Object(D.a)({},c(),{"Content-Type":"application/json"}),a.body=JSON.stringify(r);console.log("requestOptions",a),fetch(Fa,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Fa," Response"),e);var t=e.trailerObj;S(Object(D.a)({},C,{name:t.name,type:t.type,description:t.description,size:t.size,capacity:t.capacity,tare:t.tare,features:t.features,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,isFeatured:!!t.isFeatured&&t.isFeatured,availability:!!t.availability&&t.availability,photosLinks:t.photos})),R(""),k("Successfully saved Trailer data"),setTimeout((function(){k("")}),5e3)})).catch((function(e){console.log("".concat(Fa," Error"),e),R("Error occurred while saving Trailer data")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},l?"Edit Trailer":"Add Trailer"),""!==T&&o.a.createElement(v.a,{component:"h6",variant:"h5"},T),""!==A&&o.a.createElement(v.a,{component:"h6",variant:"h5"},A),o.a.createElement("form",{className:t.form,encType:"multipart/form-data",noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:W.name,helperText:M.name,value:C.name,onChange:function(e){S(Object(D.a)({},C,{name:e.target.value}))}}),h&&C.type&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(oe.a,{required:!0,className:"SectionContainer"},o.a.createElement(re.a,{id:"itemType-label"},"Type"),o.a.createElement(ie.a,{labelId:"itemType-label",id:"itemTypeSelect",value:C.type,onChange:function(e){S(Object(D.a)({},C,{type:e.target.value}))},className:t.selectEmpty},h.map((function(e,t){return console.log("itemType",e),o.a.createElement(b.a,{key:"type-".concat(e.code),value:e.code},e.name)}))))),o.a.createElement(V.a,{"aria-label":"description",required:!0,fullWidth:!0,id:"description",label:"Description",name:"description",autoComplete:"description",autoFocus:!0,multiline:!0,error:W.description,helperText:M.description,value:C.description,onChange:function(e){S(Object(D.a)({},C,{description:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"size",label:"Size",name:"size",autoComplete:"size",autoFocus:!0,error:W.size,helperText:M.size,value:C.size,onChange:function(e){S(Object(D.a)({},C,{size:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"capacity",label:"Capacity",name:"capacity",autoComplete:"capacity",autoFocus:!0,error:W.capacity,helperText:M.capacity,value:C.capacity,onChange:function(e){S(Object(D.a)({},C,{capacity:e.target.value}))}}),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"tare",label:"Tare",name:"tare",autoComplete:"tare",autoFocus:!0,error:W.tare,helperText:M.tare,value:C.tare,onChange:function(e){S(Object(D.a)({},C,{tare:e.target.value}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(qt.a,{container:!0,spacing:0},o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle1"},"Features")),o.a.createElement(qt.a,{item:!0,sm:6,className:"TextAlignRight"},o.a.createElement(E.a,{type:"button",variant:"contained",color:"primary",className:t.submit,onClick:function(e){var t=Object(L.a)(C.features);t.push(""),S(Object(D.a)({},C,{features:t}))}},"Add"))),C.features.map((function(e,t){return o.a.createElement(V.a,{key:t,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Feature",name:"feature",autoComplete:"feature",autoFocus:!0,error:W.features,helperText:M.features,value:e,onChange:function(e){var a=Object(L.a)(C.features);a[t]=e.target.value,S(Object(D.a)({},C,{features:a}))}})}))),C.rentalCharges&&o.a.createElement(qt.a,{container:!0,spacing:0,className:"SectionContainer"},o.a.createElement(qt.a,{item:!0,sm:12},o.a.createElement(v.a,{variant:"subtitle1"},"Rental Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Pickup Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Door2Door Charges")),o.a.createElement(qt.a,{item:!0,sm:6},C.rentalCharges.pickUp&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,C.rentalCharges.pickUp.map((function(e,t){return o.a.createElement(Yt.a,{key:"pickup-".concat(t)},o.a.createElement(Ut.a,null,qa(e.duration)),o.a.createElement(Ut.a,null,e.charges))})))))),o.a.createElement(qt.a,{item:!0,sm:6},C.rentalCharges&&C.rentalCharges.door2Door&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,C.rentalCharges.door2Door.map((function(e,t){return o.a.createElement(Yt.a,{key:"door2door-".concat(t)},o.a.createElement(Ut.a,null,qa(e.duration)),o.a.createElement(Ut.a,null,e.charges))}))))))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Upload Rental Charges"),o.a.createElement("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"raised-button-file",multiple:!0,type:"file",name:"rates",onChange:function(e){console.log(e.target.files),S(Object(D.a)({},C,{rates:e.target.files[0]}))}})),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"dlrCharges",label:"Damage Liability Reduction Charges",name:"dlrCharges",autoComplete:"dlrCharges",autoFocus:!0,error:W.dlrCharges,helperText:M.dlrCharges,value:C.dlrCharges,onChange:function(e){S(Object(D.a)({},C,{dlrCharges:e.target.value}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:C.isFeatured,name:"isFeatured",onChange:function(e){console.log("onChange isFeatured",e),S(Object(D.a)({},C,{isFeatured:!C.isFeatured}))}}),label:"Is Featured Trailer Type?"}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:C.availability,name:"availability",onChange:function(e){console.log("onChange availability",typeof e.target.value,e.target.value),console.log("trailer.availability",typeof C.availability),S(Object(D.a)({},C,{availability:!C.availability}))}}),label:"Set as availability to be Rented?"})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Photos"),!C.photos&&o.a.createElement(ne.a,{className:"SectionContainer"},C.photosLinks.map((function(e,t){return o.a.createElement("div",{key:C._id+"_photo"+t},o.a.createElement("a",{href:e},"Photo ",t+1))}))),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png",id:"raised-button-file",multiple:!0,type:"file",name:"photos",onChange:function(e){console.log(e.target.files),S(Object(D.a)({},C,{photos:e.target.files}))}})),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return H.apply(this,arguments)}},"Update"))))}var _a="".concat("http://localhost:5000","/admin/trailers"),Ma=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Ha=function(e){var t=Ma(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var n=Object(s.e)();console.log("history",n);var r=Object(s.f)();console.log("location",r);var i=(r.state||{from:{pathname:"/"}}).from;a.acl.TRAILER.includes("VIEW")||n.replace(i);var l=o.a.useState([]),d=Object(p.a)(l,2),u=(d[0],d[1]),m=o.a.useState(0),h=Object(p.a)(m,2),f=(h[0],h[1]),b=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Trailer List",tableRef:b,search:!1,columns:[{title:"ID",field:"trailerTypeRef",render:function(e){return e.trailerTypeRef}},{title:"Name",field:"name",render:function(e){return e.name},cellStyle:{verticalAlign:"top"}},{title:"Type",field:"type",render:function(e){return e.type},cellStyle:{verticalAlign:"top"}},{title:"Description",field:"description",render:function(e){return o.a.createElement("div",{style:{}},e.description)},cellStyle:{verticalAlign:"top"}},{title:"Size",field:"size",render:function(e){return e.size},cellStyle:{verticalAlign:"top"}},{title:"Capacity",field:"capacity",render:function(e){return e.capacity},cellStyle:{verticalAlign:"top"}},{title:"Tare",field:"tare",render:function(e){return e.tare},cellStyle:{verticalAlign:"top"}},{title:"Features",field:"features",render:function(e){return e.features},cellStyle:{verticalAlign:"top"}},{title:"Photos",field:"photos",render:function(e){return o.a.createElement("div",null,e.photos.map((function(t,a){return o.a.createElement("div",null,o.a.createElement("a",{key:e._id+"_photo"+a,href:t},"Photo ",a+1))})))},cellStyle:{verticalAlign:"top"}},{title:"Is Available?",field:"availability",render:function(e){return e.availability?"Yes":"No"},cellStyle:{verticalAlign:"top"}},{title:"is Featured?",field:"isFeatured",render:function(e){return e.isFeatured?"Yes":"No"},cellStyle:{verticalAlign:"top",height:"auto"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(_a,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(_a," Response"),t);var n=t.trailersList||[],o=t.totalCount?t.totalCount:0,r=[];u((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),f(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(_a," Error"),e),o(e)}))}))},actions:[{icon:"create",tooltip:"Edit Trailer",onClick:function(e,t){console.log("Edit onClick",e,t),n.push("/trailertype/edit/".concat(t._id))},cellStyle:{verticalAlign:"top"}},{icon:"add_circle",tooltip:"Add Trailer",isFreeAction:!0,onClick:function(e,t){console.log("Add onClick",e,t),n.push("/trailertype/add")},cellStyle:{verticalAlign:"top"}}],options:{actionsColumnIndex:-1,rowStyle:{height:"100px",maxHeight:"100px",overflow:"scroll"}}}))},Ya="".concat("http://localhost:5000","/admin/upsellitem"),Ua="".concat("http://localhost:5000","/admin/upsellitem"),Ja=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:200},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},selectEmpty:{marginTop:e.spacing(2)}}}));function za(e){if(1===e)return"Additional Day";var t=Math.floor(e/36e5);if(t<24)return"".concat(t," Hours");var a=Math.floor(t/24);return"".concat(a," Days")}function Ba(e){console.log("UpsellEdit",e);var t=Ja(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var r=Object(s.e)();console.log("history",r);var i=Object(s.f)();console.log("location",i);var l=Object(s.g)().upsellItemId;console.log("upsellItemId",l);var d=(i.state||{from:{pathname:"/"}}).from;l||a.acl.UPSELL.includes("ADD")||r.replace(d),l&&!a.acl.UPSELL.includes("UPDATE")&&r.replace(d);var u=localStorage.getItem("rentalitemtypes");u=JSON.parse(u),console.log("rentalItemTypesList",u);var h=u.filter((function(e){return"upsellitem"===e.itemtype})),f=Object(n.useState)(0),g=Object(p.a)(f,2),y=g[0],O=(g[1],Object(n.useState)({name:"",type:"",description:"",rentalCharges:{},dlrCharges:0,isFeatured:!1,availability:!1,photosLinks:[],photos:null,rates:null})),j=Object(p.a)(O,2),C=j[0],S=j[1],w=Object(n.useState)(""),I=Object(p.a)(w,2),T=I[0],k=I[1],N=Object(n.useState)(""),x=Object(p.a)(N,2),L=x[0],A=x[1];Object(n.useEffect)((function(){var e={method:"GET",headers:c()};fetch("".concat(Ya,"?id=").concat(l),e).then((function(e){return e.json()})).then((function(e){var t=e.upsellItemObj;S(Object(D.a)({},C,{name:t.name,type:t.type,description:t.description,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,isFeatured:!!t.isFeatured&&t.isFeatured,availability:!!t.availability&&t.availability,photosLinks:t.photos}))})).catch((function(e){console.log("Error occurred while fetching Upsell Item data",e)}))}),[y]);var R=Object(n.useState)({name:!1,type:!1,description:!1,rentalCharges:!1,dlrCharges:!1,isFeatured:!1,availability:!1,photos:!1}),P=Object(p.a)(R,2),F=P[0],W=(P[1],Object(n.useState)({name:"",type:"",description:"",rentalCharges:"",dlrCharges:"",isFeatured:"",availability:"",photos:""})),q=Object(p.a)(W,2),_=q[0];q[1];function M(){return(M=Object(X.a)(K.a.mark((function e(t){var a,n,o,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(F.name||F.type||F.description||F.rentalCharges||F.dlrCharges||F.isFeatured||F.availability||F.photos)){e.next=4;break}return e.abrupt("return",!1);case 4:if(a={method:"POST"},C.rates||C.photos){if((n=new FormData).append("name",C.name),n.append("type",C.type),n.append("description",C.description),n.append("dlrCharges",C.dlrCharges),n.append("availability",C.availability),n.append("isFeatured",C.isFeatured),C.rates?n.append("rates",C.rates,C.rates.name):C.rentalCharges&&n.append("rentalCharges",C.rentalCharges),C.photos&&C.photos.length>0)for(o=0;o<C.photos.length;o++)n.append("photos",C.photos[o],C.photos[o].name);l&&n.append("_id",l),console.log("formData",n),a.headers=Object(D.a)({},c()),a.body=n}else r={name:C.name,type:C.type,description:C.description,rentalCharges:C.rentalCharges,dlrCharges:C.dlrCharges,availability:C.availability,isFeatured:C.isFeatured},l&&(r._id=l),a.headers=Object(D.a)({},c(),{"Content-Type":"application/json"}),a.body=JSON.stringify(r);console.log("requestOptions",a),fetch(Ua,a).then((function(e){return e.json()})).then((function(e){console.log("".concat(Ua," Response"),e);var t=e.upsellItemObj;S(Object(D.a)({},C,{name:t.name,type:t.type,description:t.description,rentalCharges:t.rentalCharges,dlrCharges:t.dlrCharges,isFeatured:!!t.isFeatured&&t.isFeatured,availability:!!t.availability&&t.availability,photosLinks:t.photos,photos:null,rates:null})),A(""),k("Successfully saved Upsell Item data"),setTimeout((function(){k("")}),5e3)})).catch((function(e){console.log("".concat(Ua," Error"),e),A("Error occurred while saving Upsell Item data")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(m.a,{component:"main",maxWidth:"sm"},o.a.createElement(ae.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(v.a,{component:"h1",variant:"h5"},l?"Edit Upsell Item":"Add Upsell Item"),""!==T&&o.a.createElement(v.a,{component:"h6",variant:"h5"},T),""!==L&&o.a.createElement(v.a,{component:"h6",variant:"h5"},L),o.a.createElement("form",{className:t.form,encType:"multipart/form-data",noValidate:!0},o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,error:F.name,helperText:_.name,value:C.name,onChange:function(e){S(Object(D.a)({},C,{name:e.target.value}))}}),h&&C.type&&o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(oe.a,{required:!0},o.a.createElement(re.a,{id:"itemType-label"},"Type"),o.a.createElement(ie.a,{labelId:"itemType-label",id:"itemTypeSelect",value:C.type,onChange:function(e){S(Object(D.a)({},C,{type:e.target.value}))},className:t.selectEmpty},h.map((function(e,t){return o.a.createElement(b.a,{key:"type-".concat(e.code),value:e.code},e.name)}))))),o.a.createElement(V.a,{"aria-label":"description",required:!0,fullWidth:!0,id:"description",label:"Description",name:"description",autoComplete:"description",autoFocus:!0,multiline:!0,error:F.description,helperText:_.description,value:C.description,onChange:function(e){S(Object(D.a)({},C,{description:e.target.value}))}}),C.rentalCharges&&o.a.createElement(qt.a,{container:!0,spacing:0,className:"SectionContainer"},o.a.createElement(qt.a,{item:!0,sm:12},o.a.createElement(v.a,{variant:"subtitle1"},"Rental Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Pickup Charges")),o.a.createElement(qt.a,{item:!0,sm:6},o.a.createElement(v.a,{variant:"subtitle2"},"Door2Door Charges")),o.a.createElement(qt.a,{item:!0,sm:6},C.rentalCharges.pickUp&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,C.rentalCharges.pickUp.map((function(e,t){return o.a.createElement(Yt.a,{key:"pickup-".concat(t)},o.a.createElement(Ut.a,null,za(e.duration)),o.a.createElement(Ut.a,null,e.charges))})))))),o.a.createElement(qt.a,{item:!0,sm:6},C.rentalCharges&&C.rentalCharges.door2Door&&o.a.createElement(Vt.a,{component:_t.a},o.a.createElement(Mt.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(Ht.a,null,o.a.createElement(Yt.a,null,o.a.createElement(Ut.a,null,"Hire Period"),o.a.createElement(Ut.a,null,"Hire Rate"))),o.a.createElement(Jt.a,null,C.rentalCharges.door2Door.map((function(e,t){return o.a.createElement(Yt.a,{key:"door2door-".concat(t)},o.a.createElement(Ut.a,null,za(e.duration)),o.a.createElement(Ut.a,null,e.charges))}))))))),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Upload Rental Charges"),o.a.createElement("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"raised-button-file",multiple:!0,type:"file",name:"rates",onChange:function(e){console.log(e.target.files),S(Object(D.a)({},C,{rates:e.target.files[0]}))}})),o.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"dlrCharges",label:"Damage Liability Reduction Charges",name:"dlrCharges",autoComplete:"dlrCharges",autoFocus:!0,error:F.dlrCharges,helperText:_.dlrCharges,value:C.dlrCharges,onChange:function(e){S(Object(D.a)({},C,{dlrCharges:e.target.value}))}}),o.a.createElement(ce.a,{className:"SectionContainer"},o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:C.isFeatured,name:"isFeatured",onChange:function(e){console.log("onChange isFeatured",e),S(Object(D.a)({},C,{isFeatured:!C.isFeatured}))}}),label:"Is Featured Upsell Item Type?"}),o.a.createElement(se.a,{control:o.a.createElement(de.a,{checked:C.availability,name:"availability",onChange:function(e){console.log("onChange availability",typeof e.target.value,e.target.value),console.log("upsellItem.availability",typeof C.availability),S(Object(D.a)({},C,{availability:!C.availability}))}}),label:"Set as availability to be Rented?"})),o.a.createElement(ne.a,{className:"SectionContainer"},o.a.createElement(v.a,{variant:"subtitle1"},"Photos"),!C.photos&&o.a.createElement(ne.a,{className:"SectionContainer"},C.photosLinks.map((function(e,t){return o.a.createElement("div",{key:C._id+"_photo"+t},o.a.createElement("a",{href:e},"Photo ",t+1))}))),o.a.createElement("input",{accept:"image/jpeg, image/jpg, image/png, application/pdf",id:"raised-button-file",multiple:!0,type:"file",name:"photos",onChange:function(e){console.log(e.target.files),S(Object(D.a)({},C,{photos:e.target.files}))}})),o.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return M.apply(this,arguments)}},"Update"))))}var Qa=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),Ga="".concat("http://localhost:5000","/admin/upsellitems");function Za(e){var t=Qa(),a=localStorage.getItem("user");a=JSON.parse(a),console.log("userData",a);var n=Object(s.e)();console.log("history",n);var r=Object(s.f)();console.log("location",r);var i=(r.state||{from:{pathname:"/"}}).from;a.acl.UPSELL.includes("VIEW")||n.replace(i);var l=o.a.useState([]),d=Object(p.a)(l,2),u=(d[0],d[1]),m=o.a.useState(0),h=Object(p.a)(m,2),f=(h[0],h[1]),b=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{title:"Upsell Items List",tableRef:b,search:!1,columns:[{title:"ID",field:"upsellItemTypeRef",render:function(e){return e.upsellItemTypeRef}},{title:"Name",field:"name",render:function(e){return e.name}},{title:"Type",field:"type",render:function(e){return e.type}},{title:"Description",field:"description",render:function(e){return e.description}},{title:"Photos",field:"photos",render:function(e){return o.a.createElement("div",null,e.photos.map((function(t,a){return o.a.createElement("div",null,o.a.createElement("a",{key:e._id+"_photo"+a,href:t},"Photo ",a+1))})))}},{title:"Is Available?",field:"availability",render:function(e){return e.availability?"true":"false"}},{title:"is Featured?",field:"isFeatured",render:function(e){return e.isFeatured?"true":"false"}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Ga,"?count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Ga," Response"),t);var n=t.upsellItemsList||[],o=t.totalCount?t.totalCount:0,r=[];u((function(e){return console.log(typeof e,typeof n),r=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",r),r})),f(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("".concat(Ga," Error"),e),o(e)}))}))},actions:[{icon:"create",tooltip:"Edit Upsell Item",onClick:function(e,t){console.log("Edit onClick",e,t),n.push("/upsellitemtype/edit/".concat(t._id))}},{icon:"add_circle",tooltip:"Add Upsell Item",isFreeAction:!0,onClick:function(e,t){console.log("Add onClick",e,t),n.push("/upsellitemtype/add")}}],options:{actionsColumnIndex:-1}}))}var $a=a(500),Ka="".concat("http://localhost:5000","/admin/rentals"),Xa="".concat("http://localhost:5000","/admin/rental/approval"),en={0:"Pending",1:"Approved",2:"Rejected"},tn=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},paperCenter:{width:"100%",textAlign:"center",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var an=function(e){var t=tn(),a=o.a.useState([]),n=Object(p.a)(a,2),r=(n[0],n[1]),i=o.a.useState(0),l=Object(p.a)(i,2),s=(l[0],l[1]),d=o.a.useState("rental"),u=Object(p.a)(d,2),m=u[0],h=u[1],f=o.a.createRef();return o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:t.paperCenter},o.a.createElement($a.a,{size:"large",color:"primary","aria-label":"large outlined primary button group"},o.a.createElement(E.a,{variant:"rental"===m?"contained":"outlined",onClick:function(){console.log("Rental Button Clicked"),h("rental"),f.current&&f.current.onQueryChange()}},"Rental"),o.a.createElement(E.a,{variant:"extension"===m?"contained":"outlined",onClick:function(){console.log("Extension Button Clicked"),h("extension"),f.current&&f.current.onQueryChange()}},"Extension"),o.a.createElement(E.a,{variant:"reschedule"===m?"contained":"outlined",onClick:function(){console.log("Reschedule Button Clicked"),h("reschedule"),f.current&&f.current.onQueryChange()}},"Reschedule"))),o.a.createElement(R.a,{title:"".concat("rental"===m?"Rentals List":"extension"===m?"Extensions List":"Reschedule List"),tableRef:f,columns:[{title:"Rented Item Type",field:"rentedItemType",render:function(e){return"".concat(e.rentedItem)}},{title:"Rented Item",field:"rentedItemName",render:function(e){return"".concat(e.rentedItemName)}},{title:"Licensee Name",field:"licenseeName",render:function(e){return"".concat(e.licenseeName)}},{title:"Customer Name",field:"customerName",render:function(e){return"".concat(e.customerName)}},{title:"Request Type",field:"requestType",render:function(e){return"".concat(e.requestType)}},{title:"Rental Period Start Date",field:"rentalPeriodStart",render:function(e){return e.rentalPeriodStart?e.rentalPeriodStart:"NA"}},{title:"Rental Period End Date",field:"rentalPeriodEnd",render:function(e){return e.rentalPeriodEnd?e.rentalPeriodEnd:"NA"}},{title:"Extend Till Date",field:"extendTill",render:function(e){return e.extendTill?e.extendTill:"NA"}},{title:"Reschedule Start Date",field:"scheduleStart",render:function(e){return e.scheduleStart?e.scheduleStart:"NA"}},{title:"Reschedule End Date",field:"scheduleEnd",render:function(e){return e.scheduleEnd?e.scheduleEnd:"NA"}},{title:"Rental Request Status",field:"isApproved",render:function(e){return en[e.isApproved]}}],data:function(e){console.log("MaterialTable data",e);var t=e.pageSize,a=e.page,n={method:"GET",headers:c()};return new Promise((function(e,o){fetch("".concat(Ka,"?type=").concat(m,"&count=").concat(t,"&skip=").concat(a*t),n).then((function(e){return e.json()})).then((function(t){console.log("".concat(Ka," Response"),t);var n=t.requestList||[],o=t.totalCount||0,i=[];r((function(e){return console.log(typeof e,typeof n),i=[].concat(Object(L.a)(e),Object(L.a)(n)),console.log("newRows",i),i})),s(o),e({data:n,page:a,totalCount:o})})).catch((function(e){console.log("getCustomer Error",e),o(e)}))}))},actions:[{icon:"check_circle",tooltip:"Approve",onClick:function(e,t){console.log("Approve onClick",e,t);var a={rentalId:t.rentalId,requestType:t.requestType,approvalStatus:"approved"};"extension"===t.requestType&&(a.extensionId=t.extensionId),"reschedule"===t.requestType&&(a.scheduleId=t.scheduleId);var n={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify(a)};console.log("requestOptions",n),fetch(Xa,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(Xa," Response"),e),f.current&&f.current.onQueryChange()})).catch((function(e){console.log("".concat(Xa," Error"),e)}))}},{icon:"cancel",tooltip:"Reject",onClick:function(e,t){console.log("Reject onClick",e,t);var a={rentalId:t.rentalId,requestType:t.requestType,approvalStatus:"rejected"};"extension"===t.requestType&&(a.extensionId=t.extensionId),"reschedule"===t.requestType&&(a.scheduleId=t.scheduleId);var n={method:"PUT",headers:Object(D.a)({},c(),{"Content-Type":"application/json"}),body:JSON.stringify(a)};console.log("requestOptions",n),fetch(Xa,n).then((function(e){return e.json()})).then((function(e){console.log("".concat(Xa," Response"),e),f.current&&f.current.onQueryChange()})).catch((function(e){console.log("".concat(Xa," Error"),e)}))}}],options:{actionsColumnIndex:-1}}))},nn=(a(468),{paddingTop:"40px",paddingBottom:"40px",flexGrow:1});function on(){return o.a.createElement(s.c,{history:l},o.a.createElement(T,null),o.a.createElement(m.a,{style:nn},o.a.createElement(s.d,null,o.a.createElement(u,{exact:!0,path:"/",component:x}),o.a.createElement(u,{exact:!0,path:"/customers",component:Z}),o.a.createElement(u,{exact:!0,path:"/customer/edit/:customerId",component:fe}),o.a.createElement(u,{exact:!0,path:"/customer/add",component:fe}),o.a.createElement(s.b,{exact:!0,path:"/admin/customer/password/reset",component:ve}),o.a.createElement(u,{exact:!0,path:"/employee/invite",component:we}),o.a.createElement(s.b,{exact:!0,path:"/employee/invite/accept",component:Ne}),o.a.createElement(u,{exact:!0,path:"/employee/list",component:He}),o.a.createElement(u,{exact:!0,path:"/employee/edit/:employeeId?",component:Re}),o.a.createElement(s.b,{exact:!0,path:"/employee/password/reset",component:ze}),o.a.createElement(u,{exact:!0,path:"/licensees",component:it}),o.a.createElement(u,{exact:!0,path:"/licensee/signup",component:st}),o.a.createElement(u,{exact:!0,path:"/licensee/edit/:licenseeId",component:pt}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/employee/edit/:employeeId",component:gt}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/employee/invite",component:Et}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/employee/invite/accept",component:St}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/employee/list",component:At}),o.a.createElement(u,{exact:!0,path:"/admin/licensee/password/reset",component:Wt}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/trailers",component:aa}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/trailer/add",component:$t}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/trailer/edit/:trailerId?",component:$t}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/upsellitems",component:ha}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/upsellitem/add",component:sa}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/upsellitem/edit/:upsellItemId?",component:sa}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/insurance",component:ya}),o.a.createElement(u,{exact:!0,path:"/licensee/:licenseeId/servicing",component:ja}),o.a.createElement(u,{exact:!0,path:"/payments/inward",component:wa}),o.a.createElement(u,{exact:!0,path:"/payments/outward",component:ka}),o.a.createElement(u,{exact:!0,path:"/financial/licensee",component:Ge}),o.a.createElement(u,{exact:!0,path:"/financial/renteditem",component:Ke}),o.a.createElement(u,{exact:!0,path:"/rentals",component:an}),o.a.createElement(u,{exact:!0,path:"/rentalitemtype/edit/:rentalItemId",component:La}),o.a.createElement(u,{exact:!0,path:"/rentalitemtype/add",component:La}),o.a.createElement(u,{exact:!0,path:"/rentalitemtypes",component:Ra}),o.a.createElement(u,{exact:!0,path:"/trailertype/edit/:trailerId",component:Va}),o.a.createElement(u,{exact:!0,path:"/trailertype/add",component:Va}),o.a.createElement(u,{exact:!0,path:"/trailertypes",component:Ha}),o.a.createElement(u,{exact:!0,path:"/upsellitemtype/edit/:upsellItemId",component:Ba}),o.a.createElement(u,{exact:!0,path:"/upsellitemtype/add",component:Ba}),o.a.createElement(u,{exact:!0,path:"/upsellitemtypes",component:Za}),o.a.createElement(s.b,{path:"/signin",component:je}),o.a.createElement(s.a,{from:"*",to:"/"}))),o.a.createElement(N,null))}console.log("App",on),Object(r.render)(o.a.createElement(on,null),document.getElementById("t2y-app"))}},[[363,1,2]]]);
//# sourceMappingURL=main.7d6d7a49.chunk.js.map